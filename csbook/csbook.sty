%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% csbook Package
%% Version: 1.0
%% Date: 2024/05/19
%% Description: Tools for creating academic books in computer science
%% Author: Agni Datta
%% Email: agnidatta.org@gmail.com
%% Maintainer: Agni Datta
%% License: MIT
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% csbook package: Streamlines academic book creation for computer science

% Usage:
% 1. Load with \RequirePackage{csbook}.
% 2. Use the provided environments and tools.

\makeatletter

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Package Declaration
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\providecommand{\filename}{csbook} % Package filename
\providecommand{\fileversion}{v1} % Version
\providecommand{\filedate}{2024/04/17} % Release date
\providecommand{\fileauthor}{Agni Datta} % Author
\providecommand{\csbook@version}{1.0} % Internal version

\NeedsTeXFormat{LaTeX2e} % Requires LaTeX2e
\AtEndOfPackage{%
	\ProvidesPackage{\filename}[\filedate\space\fileversion\space(\fileauthor)]
	\typeout{Package `\filename', \fileversion, <\filedate>}
}
\ProvidesPackage{\filename}[\csbook@version\space A LaTeX package for typesetting computer science books]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Programming Tools
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage{ifxetex} % Detect XeTeX
\RequirePackage{ifluatex} % Detect LuaLaTeX
\RequirePackage{calc} % LaTeX calculations
\RequirePackage{etoolbox} % Advanced conditionals
\RequirePackage{xpatch} % Flexible command patching

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Macro Definition Tools
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage{xparse} % Complex macro definitions
\RequirePackage{xkeyval} % Key-value arguments
\RequirePackage{kvoptions} % Manage key-value options

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Class Option Definitions
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newbool{forprint}          % Print-specific settings
\newbool{usebiblatex}       % Enable BibLaTeX
\newbool{usecodelists}      % Enable code lists
\newbool{useebgaramond}     % Enable EB Garamond font
\newbool{usefancythm}       % Fancy theorem formatting
\newbool{usefiramono}       % Enable Fira Mono font
\newbool{usefirasans}       % Enable Fira Sans font
\newbool{useinconsolata}    % Enable Inconsolata font
\newbool{usekepler}         % Enable KP font
\newbool{uselibsans}        % Enable Libertinus Sans font
\newbool{uselmodern}        % Enable Latin Modern font
\newbool{uselmsans}         % Enable Latin Modern Sans font
\newbool{usenormalthm}      % Standard theorem formatting
\newbool{useoldlmodern}     % Old Latin Modern font
\newbool{usesourcecode}     % Source Code Pro font
\newbool{usesourcesans}     % Source Sans font
\newbool{usesrtbiblatex}    % Sorted BibLaTeX
\newbool{usetikz}           % Enable TikZ

% Boolean Initialization (defaults off)
\setbool{forprint}{false}
\setbool{usebiblatex}{false}
\setbool{usecodelists}{false}
\setbool{useebgaramond}{false}
\setbool{usefancythm}{false}
\setbool{usefiramono}{false}
\setbool{usefirasans}{false}
\setbool{useinconsolata}{false}
\setbool{usekepler}{false}
\setbool{uselibsans}{false}
\setbool{uselmodern}{false}
\setbool{uselmsans}{false}
\setbool{usenormalthm}{false}
\setbool{useoldlmodern}{false}
\setbool{usesourcecode}{false}
\setbool{usesourcesans}{false}
\setbool{usesrtbiblatex}{false}
\setbool{usetikz}{false}

% Option Definitions
\DeclareOption{forprint}{\setbool{forprint}{true}}
\DeclareOption{usebiblatex}{\setbool{usebiblatex}{true}}
\DeclareOption{usecodelists}{\setbool{usecodelists}{true}}
\DeclareOption{useebgaramond}{\setbool{useebgaramond}{true}}
\DeclareOption{usefancythm}{\setbool{usefancythm}{true}}
\DeclareOption{usefiramono}{\setbool{usefiramono}{true}}
\DeclareOption{usefirasans}{\setbool{usefirasans}{true}}
\DeclareOption{useinconsolata}{\setbool{useinconsolata}{true}}
\DeclareOption{usekepler}{\setbool{usekepler}{true}}
\DeclareOption{uselibsans}{\setbool{uselibsans}{true}}
\DeclareOption{uselmodern}{\setbool{uselmodern}{true}}
\DeclareOption{uselmsans}{\setbool{uselmsans}{true}}
\DeclareOption{usenormalthm}{\setbool{usenormalthm}{true}}
\DeclareOption{useoldlmodern}{\setbool{useoldlmodern}{true}}
\DeclareOption{usesourcecode}{\setbool{usesourcecode}{true}}
\DeclareOption{usesourcesans}{\setbool{usesourcesans}{true}}
\DeclareOption{usesrtbiblatex}{\setbool{usesrtbiblatex}{true}}
\DeclareOption{usetikz}{\setbool{usetikz}{true}}

% Handle Unrecognized Options
\DeclareOption*{\PackageWarning{csbook}{Unrecognised option '\CurrentOption'}}

% Process Options
\ProcessOptions\relax

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% PDF Management and External File Handling
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[2.0, objcompress, compress]{bxpdfver} % PDF version and compression settings
\RequirePackage{comment} % List environments with conditional comments
\RequirePackage{pdfpages} % Include external PDF pages
\RequirePackage{pdflscape} % Enable landscape pages
\RequirePackage{ragged2e} % Enhanced justification options

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Package for Color Support
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[x11names, dvipsnames, svgnames]{xcolor} % Extended color schemes

% Variable initialization for accent color
\providecommand{\declvar}[2]{\def#1{#2}} % Declare variables
\declvar{\accentcolor}{RoyalBlue4} % Default accent color

% Command to set accent color
\providecommand{\setaccentcolor}[1]{%
	\ifx\relax#1\relax
		\declvar{\accentcolor}{RoyalBlue4} % Reset to default if empty
	\else
		\declvar{\accentcolor}{#1} % Set user color
	\fi
	\colorlet{accentcolor}{\accentcolor} % Update color
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Language and Typographic Settings
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[english]{babel}  % English language support
\RequirePackage[autostyle=true, csdisplay=true]{csquotes} % Enhanced quotations
\RequirePackage[babel=true]{microtype} % Microtypography for XeTeX and LuaLaTeX

% Conditional options for XeTeX and LuaLaTeX
\ifxetex\PassOptionsToPackage{protrusion=true}{microtype}\fi
\ifluatex\PassOptionsToPackage{protrusion=true,expansion=true}{microtype}\fi

% Line spacing and text symbols configuration
\RequirePackage[onehalfspacing]{setspace}  % 1.5 line spacing
\RequirePackage[full]{textcomp}  % Extra symbols
\RequirePackage[normalem]{ulem}  % Underlining and strikethrough

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Page Layout Configuration
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\providecommand{\forprint}{%
	% Geometry settings for A4 layout
	\RequirePackage[%
		a4paper,                % Paper size: A4
		left=1.5in,             % Left margin for binding
		right=1in,              % Right margin
		top=1in,                % Top margin
		bottom=1in,             % Bottom margin
		bindingoffset=0.5in,    % Binding offset
		headheight=15pt,        % Header height
		headsep=20pt,           % Space between header and text
		footskip=25pt,          % Footer space
		textheight=670pt,       % Text block height
		textwidth=440pt,        % Text block width
		centering,              % Center text block
		includeheadfoot         % Include headers/footers
	]{geometry}                 % Page layout management
}

\ifbool{forprint}{\forprint}{%
	\RequirePackage[%
		a4paper,               % A4 paper size
		tmargin=3.00cm,        % Top margin
		bmargin=3.00cm,        % Bottom margin
		lmargin=3.00cm,        % Left margin
		rmargin=3.00cm,        % Right margin
		footskip=1.00cm        % Footer distance
	]{geometry}                % Page layout management
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Customization of Headers and Footers
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage{fancyhdr} % Custom headers/footers

\fancyhf{} % Clear default header/footer

% Header configuration
\fancyhead[LE, RO]{\normalfont\small\sffamily\thepage} % Page number placement
\fancyhead[LO, RE]{\normalfont\small\sffamily\@title} % Title placement

\renewcommand{\headrulewidth}{0.25pt} % Header rule thickness

\pagestyle{fancy} % Apply custom style

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Font and Mathematics Packages
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[T1]{fontenc}            % T1 font encoding
\RequirePackage{amsfonts}               % Mathematical fonts
\RequirePackage{amssymb}                % Additional symbols
\RequirePackage{amsmath}                % Advanced math formatting
\RequirePackage{amsthm}                 % Theorem environments
\RequirePackage{thmtools}               % Enhanced theorem functionalities
\RequirePackage{nicefrac}               % Better fractions
\RequirePackage{siunitx}                % SI units formatting
\RequirePackage{fontspec}               % Custom fonts (XeLaTeX/LuaLaTeX)
\RequirePackage{unicode-math}           % Unicode math fonts

% Old Latin Modern font configuration for text and math
\providecommand{\useoldlmodern}{%
	\setmainfont[%
		ItalicFont = lmroman10-italic.otf, % Italic font
		SmallCapsFont = lmromancaps10-regular.otf, % Small caps font
		SmallCapsFeatures = {RawFeature=+smcp}, % Small caps
		BoldFont = lmroman10-bold.otf, % Bold font
		BoldItalicFont = lmroman10-bolditalic.otf, % Bold italic font
		RawFeature = {+calt, +case, +hlig, +kern, +liga, +lnum, +mark, +mkmk, +pnum} % Typographic features
	]{lmroman10-regular.otf} % Regular text font
	\setmathfont[%
		RawFeature = {+calt, +case, +hlig, +kern, +liga, +lnum, +mark, +mkmk, +pnum} % Typographic features
	]{latinmodern-math.otf} % Math font
	\setsansfont[%
		ItalicFont = lmsans10-oblique.otf, % Italic sans font
		SmallCapsFont = NewCMSans10-Book.otf, % Small caps font
		SmallCapsFeatures = {RawFeature=+smcp}, % Small caps
		BoldFont = lmsans10-bold.otf, % Bold sans font
		BoldItalicFont = lmsans10-boldoblique.otf, % Bold-italic sans font
		RawFeature = {+calt, +case, +hlig, +kern, +liga, +lnum, +mark, +mkmk, +pnum} % Typographic features
	]{lmsans10-regular.otf} % Sans-serif font
}

% Latin Modern font configuration for text and math
\providecommand{\uselmodern}{%
	\setmainfont[%
		ItalicFont = NewCM10-BookItalic.otf, % Italic font
		SmallCapsFont = NewCM10-Book.otf, % Small caps font
		SmallCapsFeatures = {RawFeature=+smcp}, % Small caps
		BoldFont = NewCM10-Bold.otf, % Bold font
		BoldItalicFont = NewCM10-BoldItalic.otf, % Bold italic font
		RawFeature = {+calt, +case, +hlig, +kern, +liga, +lnum, +mark, +mkmk, +pnum} % Typographic features
	]{NewCM10-Book.otf} % Regular text font
	\setmathfont{NewCMMath-Book.otf} % Math font
	\setsansfont[%
		ItalicFont = NewCMSans10-Oblique.otf, % Italic sans font
		SmallCapsFont = NewCMSans10-Book.otf, % Small caps font
		SmallCapsFeatures = {RawFeature=+smcp}, % Small caps
		BoldFont = NewCMSans10-Bold.otf, % Bold sans font
		BoldItalicFont = NewCMSans10-BoldOblique.otf, % Bold-italic sans font
		RawFeature = {+calt, +case, +hlig, +kern, +liga, +lnum, +mark, +mkmk, +pnum} % Typographic features
	]{NewCMSans10-Book.otf} % Sans-serif font
}

% EB Garamond font configuration for text and math
\providecommand{\useebgaramond}{%
	\setmainfont[%
		RawFeature = {+calt, +case, +hlig, +kern, +liga, +lnum, +mark, +mkmk, +pnum}, % Typographic features
		StylisticSet = {3,5} % Stylistic sets
	]{EB Garamond} % Main text font
	\setmathfont[%
		RawFeature = {+calt, +case, +hlig, +kern, +liga, +lnum, +mark, +mkmk, +pnum}, % Typographic features
		StylisticSet = {2,6,7,9} % Stylistic sets
	]{Garamond-Math.otf} % Math font
}

% Kepler font configuration
\providecommand{\usekepler}{%
	\RequirePackage{kpfonts-otf} % Load Kepler package
	\let\D\relax % Reset definition of \D
}

% Libertinus Sans font configuration
\providecommand{\uselibsans}{%
	\setsansfont[%
		UprightFont = LibertinusSans-Regular, % Regular font
		BoldFont = LibertinusSans-Bold.otf, % Bold font
		ItalicFont = LibertinusSans-Italic.otf, % Italic font
		SmallCapsFont = LibertinusSans-Regular, % Small caps font
		SmallCapsFeatures = {RawFeature=+smcp}, % Small caps
		RawFeature = {+calt, +case, +dlig, +kern, +liga, +lnum, +mark, +mkmk, +pnum}, % Typographic features
		StylisticSet = {1,3} % Stylistic sets
	]{LibertinusSans-Regular.otf} % Set as default sans font
}

% Latin Modern Sans font configuration
\providecommand{\uselmsans}{%
	\setsansfont[%
		ItalicFont = NewCMSans10-Oblique.otf, % Italic font
		SmallCapsFont = NewCMSans10-Book.otf, % Small caps font
		SmallCapsFeatures = {RawFeature=+smcp}, % Small caps
		BoldFont = NewCMSans10-Bold.otf, % Bold font
		BoldItalicFont = NewCMSans10-BoldOblique.otf, % Bold-italic font
		RawFeature = {+calt, +case, +hlig, +kern, +liga, +lnum, +mark, +mkmk, +pnum} % Typographic features
	]{NewCMSans10-Book.otf} % Set as default sans-serif font
}

% Source Sans Pro font configuration
\providecommand{\usesourcesans}{%
	\RequirePackage[otf, lining, proportional, scale=0.975]{sourcesanspro} % Load package with options
	\setsansfont[%
		Scale = 0.950, % Font scale
		SmallCapsFeatures = {RawFeature=+smcp}, % Small caps
		RawFeature = {+calt, +case, +dlig, +kern, +liga, +lnum, +mark, +mkmk, +pnum} % Typographic features
	]{Source Sans Pro} % Set Source Sans font
}

% Source Code Pro font configuration
\providecommand{\usesourcecode}{%
	\RequirePackage[otf, lining, scale=0.865]{sourcecodepro} % Load package with options
	\setmonofont[%
		Scale = 0.865, % Font scale
		SmallCapsFeatures = {RawFeature=+smcp}, % Small caps
		RawFeature = {+calt, +case, +dlig, +kern, +liga, +lnum, +mark, +mkmk, +pnum} % Typographic features
	]{Source Code Pro} % Set monospaced font
}

% Fira Sans font configuration
\providecommand{\usefirasans}{%
	\setsansfont[%
		Scale = 0.925, % Font scale
		BoldFont = {FiraSans-Bold.otf}, % Bold font
		ItalicFont = {FiraSans-BookItalic.otf}, % Italic font
		BoldItalicFont = {FiraSans-BoldItalic.otf}, % Bold-italic font
		SmallCapsFont = {FiraSans-Book.otf}, % Small caps font
		SmallCapsFeatures = {RawFeature=+smcp}, % Small caps
		RawFeature = {+calt, +case, +dlig, +kern, +liga, +lnum, +mark, +mkmk, +pnum} % Typographic features
	]{FiraSans-Book.otf} % Set Fira Sans font
}

% Fira Mono font configuration
\providecommand{\usefiramono}{%
	\setmonofont[%
		Scale = 0.865, % Font scale
		BoldFont = {FiraMono-Bold.otf}, % Bold font
		ItalicFont = {FiraMono-Oblique.otf}, % Italic font
		BoldItalicFont = {FiraMono-BoldOblique.otf}, % Bold-italic font
		SmallCapsFont = {FiraMono-Regular.otf}, % Small caps font
		SmallCapsFeatures = {RawFeature=+smcp}, % Small caps
		RawFeature = {+calt, +case, +dlig, +kern, +liga, +lnum, +mark, +mkmk, +pnum} % Typographic features
	]{FiraMono-Regular.otf}
}

% Inconsolata font configuration
\providecommand{\useinconsolata}{%
	\setmonofont[%
		SmallCapsFeatures = {RawFeature=+smcp}, % Small caps
		RawFeature = {+calt, +case, +dlig, +kern, +liga, +lnum, +mark, +mkmk, +pnum} % Typographic features
	]{inconsolata}
}

% Apply fonts based on flags
\ifbool{useebgaramond}{\useebgaramond}{\typeout{EB Garamond fonts not applied.}}
\ifbool{usekepler}{\usekepler}{\typeout{Kepler fonts not applied.}}
\ifbool{uselmodern}{\uselmodern}{\typeout{Latin Modern fonts not applied.}}
\ifbool{useoldlmodern}{\useoldlmodern}{\typeout{Old Latin Modern fonts not applied.}}

\ifbool{useinconsolata}{\useinconsolata}{\typeout{Inconsolata fonts not applied.}}
\ifbool{usefiramono}{\usefiramono}{\typeout{Fira Mono fonts not applied.}}
\ifbool{usesourcecode}{\usesourcecode}{\typeout{Source Code fonts not applied.}}

\ifbool{usefirasans}{\usefirasans}{\typeout{Fira Sans fonts not applied.}}
\ifbool{uselibsans}{\uselibsans}{\typeout{Libertinus Sans fonts not applied.}}
\ifbool{uselmsans}{\uselmsans}{\typeout{Libertinus Sans fonts not applied.}}
\ifbool{usesourcesans}{\usesourcesans}{\typeout{Source Sans fonts not applied.}}

% Resolve math font conflicts
\AtEndPreamble{%
	\let\mathbfcal\relax
	\RequirePackage[%
		bb=bboldx,  % Blackboard bold
		cal=cm      % Calligraphic font
	]{mathalpha}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Custom Sectioning Commands
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[nobottomtitles*, explicit, compact]{titlesec}

\renewcommand{\bottomtitlespace}{0.1\textheight}

% Font styles
\providecommand{\headerfont}{\sffamily}
\providecommand{\partfont}{\normalfont\headerfont}
\providecommand{\sectionfont}{\Large\headerfont}
\providecommand{\subsectionfont}{\large\headerfont}
\providecommand{\subsubsectionfont}{\normalsize\headerfont}

% Part title formatting
\titleformat{\part}[display]
        {\partfont\RaggedRight}
        {\color{accentcolor}\LARGE\partname~\thepart}
        {0pt}
        {\titlerule\bigskip\Huge#1\vfill}
        \titlespacing*{\part}{0pt}{\fill}{\fill}

% Chapter title formatting
\titleformat{\chapter}[display]
        {\LARGE\headerfont}
        {\RaggedLeft{\rmfamily\scshape\large\chaptertitlename}~\Huge\color{accentcolor}\thechapter}
        {1ex}
        {\titlerule\vspace{1ex}#1}[\vspace{1ex}\titlerule]
        \titlespacing*{\chapter}{0pt}{25pt}{25pt}

% Section title formatting
\titleformat{\section}[block]
        {\sectionfont}
        {\color{accentcolor}\huge\thesection}
        {10pt}
        {#1\vspace{2.5pt}\hrule}
        \titlespacing*{\section}{0pt}{5pt}{-12.5pt}

% Subsection title formatting
\titleformat{\subsection}[block]
        {\subsectionfont}
        {\color{accentcolor}\Large\thesubsection}
        {7.5pt}
        {#1}

% Subsubsection title formatting
\titleformat{\subsubsection}[runin]
        {\subsubsectionfont}
        {\color{accentcolor}\thesubsubsection}
        {5pt}
        {#1.}

% Paragraph and subparagraph formatting
\renewcommand*{\paragraph}[1]{\noindent\normalfont{\textbf{#1.}}}
\renewcommand*{\subparagraph}[1]{\noindent\normalfont{\textsc{#1.}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Local Table of Contents
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage{etoc} % Load etoc package for local tables of contents

\etockeeporiginaltableofcontents % Preserve the original table of contents settings

% Command: \localtoc
% Description: Generates a local table of contents with distinct fonts for sections and subsections, and enhanced formatting.
\providecommand{\localtoc}{%
	\begingroup
	\etocsettocstyle{}{} % Clear default headings
	\etocsetnexttocdepth{section} % Display entries up to section level
	\etocsetstyle{section}
	{}{}{ % Formatting for each entry in the TOC
		\sffamily\scshape\etocnumber\hspace*{10pt}\etocname\nobreak
		\hskip5pt\dotfill\hskip5pt\nobreak
		\etocpage\par
	}{}
	{\color{accentcolor}\rule{\textwidth}{0.5pt}\medskip} % Horizontal rule with accent color
	\localtableofcontents % Generate the local table of contents
	{\medskip\noindent\color{accentcolor}\rule{\textwidth}{0.5pt}} % Horizontal rule after TOC
	\endgroup
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Customization of Table of Contents
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[titles]{tocloft} % Package to enhance customization of the Table of Contents

% Adjust spacing after section, subsection, and subsubsection numbers
\renewcommand{\cftpartafterpnum}{\vskip1pt}         % Space after part numbers
\renewcommand{\cftchapafterpnum}{\vskip1pt}         % Space after chapter numbers
\renewcommand{\cftsecafterpnum}{\vskip1pt}          % Space after section numbers
\renewcommand{\cftsubsecafterpnum}{\vskip1pt}       % Space after subsection numbers
\renewcommand{\cftsubsubsecafterpnum}{\vskip1pt}    % Space after subsubsection numbers

% Adjust number alignment widths
\addtolength{\cftpartnumwidth}{3.5pt}      % Part number width
\addtolength{\cftchapnumwidth}{5.0pt}      % Chapter number width
\addtolength{\cftsecnumwidth}{3.5pt}       % Section number width
\addtolength{\cftsubsecnumwidth}{5.0pt}    % Subsection number width
\addtolength{\cftsubsubsecnumwidth}{5.0pt} % Subsubsection number width

% Set font styles for Table of Contents entries
\renewcommand{\cftpartfont}{\Large\sffamily}            % Parts font style
\renewcommand{\cftchapfont}{\Large\scshape}             % Chapters font style
\renewcommand{\cftsecfont}{\normalsize\bfseries}        % Sections font style
\renewcommand{\cftsubsecfont}{\normalsize}              % Subsections font style
\renewcommand{\cftsubsubsecfont}{\normalsize}           % Subsubsections font style

% Set depth for section numbering and TOC entries
\setcounter{secnumdepth}{4} % Numbering depth (part, chapter, section, subsection)
\setcounter{tocdepth}{2}    % TOC entries depth (part, chapter, section)

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Support for Creating Indexes
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[makeindex]{imakeidx} % Package to manage and create indexes

% Define custom index style
\begin{filecontents}{csindex.ist}
	quote '+'
	letter_group
	symhead_positive "Symbols"
	numhead_positive "Numbers"
	headings_flag 1
	heading_prefix "\\textcolor{\\accentcolor}{\\large\\textbf{" heading_suffix "}}\n"
	delim_0 "\\dotfill"
	delim_1 "\\dotfill"
	delim_2 "\\dotfill"
	delim_3 "\\dotfill"
	delim_4 "\\dotfill"
	delim_5 "\\dotfill"
	delim_r "\\dotfill"
	preamble "\\begin{theindex}\n\\small\n"
		postamble "\n\\end{theindex}\n"
\end{filecontents}

% Create the index with custom style and formatting
\makeindex[intoc, title=Index, columns=2, options=-s csindex] % Configure the index with title and 2-column layout

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Hyperlinks and Metadata Configuration
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[pdfusetitle, pagebackref]{hyperref} % Enable hyperlinks and PDF metadata
\RequirePackage{bookmark} % Handle PDF bookmarks for easy navigation
\RequirePackage{xurl} % Handle automatic line breaks for long URLs

% Configure Hyperref settings for document appearance and metadata
\hypersetup{%
	pdfsubject={Computer Science},    % Set document subject
	pdfkeywords={computer science},   % Set keywords for searchability
	colorlinks=true,                  % Enable colored hyperlinks
	citecolor=accentcolor,            % Citation link color
	linkcolor=accentcolor,            % Internal link color (e.g., cross-references)
	urlcolor=accentcolor,             % URL link color
	frenchlinks=true,                 % Small caps for links
	unicode=true,                     % Enable Unicode in links
	bookmarksnumbered=true,           % Number bookmarks for easy reference
	breaklinks=true                   % Allow line breaks for long URLs
}

% Cleveref for intelligent cross-referencing (better handling of references)
\AtBeginDocument{%
	\RequirePackage{cleveref}         % Load Cleveref for smart cross-referencing
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Page Style Customizations for Document Structure
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Front matter
\let\oldfrontmatter\frontmatter % Preserve the original \frontmatter command
\renewcommand{\frontmatter}{%
	\oldfrontmatter % Execute the original \frontmatter command
	\pagestyle{plain} % Set page style to plain for front matter
}

% Main matter
\let\oldmainmatter\mainmatter % Preserve the original \mainmatter command
\renewcommand{\mainmatter}{%
	\oldmainmatter % Execute the original \mainmatter command
	\@openrighttrue % Ensure chapters begin on right-hand pages
	\pagestyle{fancy} % Apply the fancy page style to the main matter
}

% Back matter
\let\oldbackmatter\backmatter % Preserve the original \backmatter command
\renewcommand{\backmatter}{%
	\oldbackmatter % Execute the original \backmatter command
	\@openrighttrue % Ensure sections begin on right-hand pages
	\bookmarksetup{startatroot} % Configure bookmarks to start at the root level
	\pagestyle{plain} % Apply the plain page style to the back matter
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Package for Customizing Lists
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage{enumitem} % List customization package

% Global List Settings
\setlist{nosep, noitemsep} % Remove extra spacing in lists

% Customize Enumerate Labels
\setlist[enumerate, 1]{label=(\arabic*)}    % First level (1, 2, 3, ...)
\setlist[enumerate, 2]{label=(\alph*)}      % Second level (a, b, c, ...)

% Redefine Bullet Symbols for Itemize
\renewcommand{\labelitemi}{\textcolor{accentcolor}{\textbullet}{}}            % First level bullet
\renewcommand{\labelitemii}{\textcolor{accentcolor}{\textcircled{}}}          % Second level circle
\renewcommand{\labelitemiii}{\textcolor{accentcolor}{\ast{}}}                 % Third level asterisk
\renewcommand{\labelitemiv}{\textcolor{accentcolor}{\textasteriskcentered{}}} % Fourth level asterisk

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Packages for Captions and Graphics
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage{float}       % Precise control over figure/table placement
\RequirePackage{graphics}    % Basic graphics inclusion
\RequirePackage{graphicx}    % Advanced graphic formats (PDF, EPS, etc.)
\RequirePackage{subcaption}  % Handle subfigures/subcaptions

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Packages for Typesetting Algorithms
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[algonl, boxed, longend, vlined]{algorithm2e} % Algorithm formatting
\SetAlFnt{\small}                               % Small font for algorithms
\SetAlCapNameFnt{\normalfont\sffamily}          % Caption font style
\SetAlCapFnt{\normalfont\sffamily\color{accentcolor}} % Caption color
\SetAlgoSkip{medskip}                           % Space between steps
\SetAlgoInsideSkip{medskip}                     % Space inside algorithm
\SetAlCapSkip{1em}                              % Caption spacing
\SetAlgoNlRelativeSize{-2}                      % Smaller line numbers
\SetNlSty{texttt}{[}{]}                         % Line number styling
\SetAlgoCaptionSeparator{.}                     % Caption separator

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Packages for Creating Framed Environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[skipabove=10pt, skipbelow=10pt, ntheorem, framemethod=Tikz]{mdframed} % Framed environments
\RequirePackage[most]{tcolorbox} % Color boxes

% Custom framed environment "tboxed"
\newmdenv[font=\normalfont\small, frametitlefont=\bfseries, tikzsetting={draw=black},
	backgroundcolor=none, skipabove=10pt, skipbelow=10pt, innerleftmargin=7.5pt,
	innerrightmargin=7.5pt, innertopmargin=10pt, innerbottommargin=10pt,
	roundcorner=1pt]{tboxed}

% Custom framed environment "colbox"
\newmdenv[font=\normalfont\small, frametitlefont=\bfseries, hidealllines=true,
	backgroundcolor={accentcolor!10!white}, skipabove=10pt, skipbelow=10pt,
	innerleftmargin=7.5pt, innerrightmargin=7.5pt, innertopmargin=10pt,
	innerbottommargin=10pt, roundcorner=1pt]{colbox}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Glossaries and Acronyms
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[automake, acronym, symbols, nonumberlist, nogroupskip, indexonlyfirst,
	stylemods=longextra, nopostdot, toc]{glossaries-extra} % Glossary package
\makeglossaries

\setabbreviationstyle[acronym]{long-short}  % Acronym style
\renewcommand{\glsnamefont}[1]{{\normalfont\sffamily\color{accentcolor}#1.}} % Glossary name font
\renewcommand{\glossarypreamble}{\begin{small}} % Glossary preamble
		\renewcommand{\glossarypostamble}{\end{small}} % Glossary postamble

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Abstract Environment Definition
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newenvironment{abstract}{%
	\quotation\small % Quotation environment for abstract
	\textsf{\color{accentcolor}\abstractname}.\
}{%
	\endquotation % End quotation in single-column mode
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Appendix Handling Setup
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Advanced appendix package options
\RequirePackage[%
	toc,        % Include appendices in TOC
	page,       % Start each appendix on a new page
	title,      % Prefix "Appendix" to titles
	header,     % Add "Appendix" to headers
	titletoc    % Add "Appendix" in TOC
]{appendix}

% Save and redefine \appendix command for customization
\let\oldappendices\appendix
\renewcommand{\appendix}{%
	\part*{Appendix} % Display "Appendix" title without numbering
	\oldappendices    % Keep original appendix functionality
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Customizations for verbatim environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage{verbatim}  % Raw text/code inclusion
\RequirePackage{lettrine}  % First letter stylization
\RequirePackage{fancyvrb}  % Enhanced verbatim environments

% Redefine verbatim line processing
\providecommand{\savedverbatim@processline}{} % Save original command
\let\savedverbatim@processline=\verbatim@processline

\renewcommand{\verbatim@processline}{%
	\let\verbatim@processline=\savedverbatim@processline
	\if\relax\the\verbatim@line\relax
	\else
		\the\verbatim@line\par
	\fi
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Package Imports for Enhanced Table, Figure, and Layout Control
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[bottom, multiple, hang]{footmisc} % Custom footnote formatting
\RequirePackage{adjustbox}           % For advanced content adjustments
\RequirePackage{array}               % Enhancements for array/tabular environments
\RequirePackage{booktabs}            % Professional-quality table lines and rules
\RequirePackage{footnote}            % Enables footnotes within the document
\RequirePackage{longtable}           % Tables that span multiple pages
\RequirePackage{multicol}            % Supports multi-column formatting
\RequirePackage{multirow}            % Allows multi-row spanning in tables
\RequirePackage{tabularx}            % Flexible tables with adjustable column width
\RequirePackage{wrapfig}             % Enables text wrapping around figures

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Drawings and Diagrams
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\providecommand{\usetikz}{%
	\RequirePackage{tikz} % Load TikZ for creating graphics and diagrams
	\RequirePackage{tikz-cd} % Load TikZ-cd for commutative diagrams
	\RequirePackage{pgfplots} % Load pgfplots for advanced plotting
	\pgfplotsset{compat=1.18} % Set compatibility with version 1.18
}

\ifbool{usetikz}{\usetikz}{\typeout{TikZ and related packages are not included.}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Captions Setup
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\AtBeginDocument{%
	\RequirePackage[%
		font={rm},                        % Sets caption text to sans-serif font
		labelfont={color=accentcolor,sf}, % Configures label font and color
		labelsep=period,                  % Separates label and content with a period
		skip=1em                          % Adds vertical spacing before captions
	]{caption}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Epigraphs and Dedications
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage{epigraph} % Load the epigraph package for handling epigraphs

% Set up epigraph formatting
\setlength\epigraphrule{0.65pt} % Sets the thickness of the rule under the epigraph
\renewcommand\textflush{flushright} % Aligns the epigraph text to the right
\renewcommand\epigraphsize{\small} % Sets the font size of the epigraph
\setlength\epigraphwidth{0.65\textwidth} % Defines the width of the epigraph text block

% Command to format individual dedication entries
% Arguments:
%   #1: The dedication text
%   #2: The author's name
\providecommand{\dedication}[2]{%
	\epigraph{#1}{\medskip\normalfont\sffamily\par#2} % Formats the dedication with the text and author
	\bigskip % Adds vertical space after the dedication
}

% Command to generate a complete set of dedications
% Argument:
%   #1: List of dedication entries formatted using the \dedication command
\providecommand{\generateDedications}[1]{%
	\thispagestyle{empty} % Removes page numbering and header/footer on this page
	\begin{center}
		\vspace*{\fill} % Adds vertical space before and after the content
		\large#1 % Formats the list of dedications
		\vspace*{\fill} % Adds vertical space after the content
	\end{center}
	\pagestyle{plain}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Definition of New Environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Custom QED symbol rendered in the accent color
\providecommand{\QEDsymbol}{\color{accentcolor}\ensuremath{\blacksquare}}
% Replace the default QED symbol with the custom symbol
\renewcommand{\qedsymbol}{\QEDsymbol}

% Define Fancy Theorem Environments
\providecommand{\usefancythm}{%
	% Define the font style commands for each theorem type
	\providecommand{\thmfont}{\normalfont} % Font for theorems
	\providecommand{\defnfont}{\normalfont} % Font for definitions
	\providecommand{\remarkfont}{\normalfont} % Font for remarks
	\providecommand{\hltfont}{\normalfont\sffamily} % Font for highlighted statements

	% Define the color commands for each type
	\providecommand{\thmcolor}{DodgerBlue1} % Color for theorems
	\providecommand{\defncolor}{RoyalBlue1} % Color for definitions
	\providecommand{\remarkcolor}{Aquamarine4} % Color for remarks
	\providecommand{\hltcolor}{IndianRed1} % Color for highlighted statements

	% Declare the theorem style for theorems
	\declaretheoremstyle[%
		spaceabove=0pt, spacebelow=0pt,
		headfont=\sffamily\color{\thmcolor},
		notefont=\sffamily\color{\thmcolor},
		bodyfont=\normalfont,
		postheadspace=5pt,
		numberwithin=section,
		mdframed={
				linewidth=2pt,
				rightline=false, topline=false, bottomline=false,
				linecolor=\thmcolor, backgroundcolor=\thmcolor!5,
			},
		headpunct={.}
	]{thmstyle}

	% Declare the theorem style for definitions
	\declaretheoremstyle[%
		spaceabove=0pt, spacebelow=0pt,
		headfont=\sffamily\color{\defncolor},
		notefont=\sffamily\color{\defncolor},
		bodyfont=\normalfont,
		postheadspace=5pt,
		numberwithin=section,
		mdframed={
				linewidth=2pt,
				rightline=false, topline=false, bottomline=false,
				linecolor=\defncolor, backgroundcolor=\defncolor!5,
			},
		headpunct={.}
	]{defstyle}

	% Declare the theorem style for remarks
	\declaretheoremstyle[%
		spaceabove=0pt, spacebelow=0pt,
		headfont=\sffamily\color{\remarkcolor},
		notefont=\sffamily\color{\remarkcolor},
		bodyfont=\normalfont,
		postheadspace=5pt,
		numberwithin=section,
		mdframed={
				linewidth=2pt,
				rightline=false, topline=false, bottomline=false,
				linecolor=\remarkcolor, backgroundcolor=\remarkcolor!5,
			},
		headpunct={.}
	]{remarkstyle}

	% Declare the theorem style for highlighted text
	\declaretheoremstyle[%
		spaceabove=0pt, spacebelow=0pt,
		headfont=\sffamily\color{\hltcolor},
		notefont=\sffamily\color{\hltcolor},
		bodyfont=\normalfont\sffamily,
		postheadspace=5pt,
		numberwithin=section,
		mdframed={
				linewidth=2pt,
				rightline=false, topline=false, bottomline=false,
				linecolor=\hltcolor, backgroundcolor=\hltcolor!5,
			},
		headpunct={.}
	]{hltstyle}

	% Declare the proof style
	\declaretheoremstyle[%
		headfont=\sffamily\color{\thmcolor},
		notefont=\sffamily\color{\thmcolor},
		bodyfont=\normalfont,
		postheadspace=5pt,
		numbered=no,
		headpunct={.},
		qed=$\color{\thmcolor}\scriptstyle\blacksquare$
	]{proofstyle}

	% Theorem-like statements (thmstyle)
	\declaretheorem[style=thmstyle,name=Theorem]{theorem}
	\declaretheorem[style=thmstyle,sibling=theorem]{assertion}
	\declaretheorem[style=thmstyle,sibling=theorem]{assumption}
	\declaretheorem[style=thmstyle,sibling=theorem]{axiom}
	\declaretheorem[style=thmstyle,sibling=theorem]{claim}
	\declaretheorem[style=thmstyle,sibling=theorem]{conclusion}
	\declaretheorem[style=thmstyle,sibling=theorem]{conjecture}
	\declaretheorem[style=thmstyle,sibling=theorem]{corollary}
	\declaretheorem[style=thmstyle,sibling=theorem]{fact}
	\declaretheorem[style=thmstyle,sibling=theorem]{hypothesis}
	\declaretheorem[style=thmstyle,sibling=theorem]{lemma}
	\declaretheorem[style=thmstyle,sibling=theorem]{postulate}
	\declaretheorem[style=thmstyle,sibling=theorem]{property}
	\declaretheorem[style=thmstyle,sibling=theorem]{proposition}

	% Unnumbered theorem-like statements
	\declaretheorem[style=thmstyle,unnumbered,name=Theorem]{theorem*}
	\declaretheorem[style=thmstyle,unnumbered,name=Assertion]{assertion*}
	\declaretheorem[style=thmstyle,unnumbered,name=Assumption]{assumption*}
	\declaretheorem[style=thmstyle,unnumbered,name=Axiom]{axiom*}
	\declaretheorem[style=thmstyle,unnumbered,name=Claim]{claim*}
	\declaretheorem[style=thmstyle,unnumbered,name=Conclusion]{conclusion*}
	\declaretheorem[style=thmstyle,unnumbered,name=Conjecture]{conjecture*}
	\declaretheorem[style=thmstyle,unnumbered,name=Corollary]{corollary*}
	\declaretheorem[style=thmstyle,unnumbered,name=Fact]{fact*}
	\declaretheorem[style=thmstyle,unnumbered,name=Hypothesis]{hypothesis*}
	\declaretheorem[style=thmstyle,unnumbered,name=Lemma]{lemma*}
	\declaretheorem[style=thmstyle,unnumbered,name=Postulate]{postulate*}
	\declaretheorem[style=thmstyle,unnumbered,name=Property]{property*}
	\declaretheorem[style=thmstyle,unnumbered,name=Proposition]{proposition*}

	% Definition-like statements (defstyle)
	\declaretheorem[style=defstyle,sibling=theorem]{application}
	\declaretheorem[style=defstyle,sibling=theorem]{construction}
	\declaretheorem[style=defstyle,sibling=theorem]{convention}
	\declaretheorem[style=defstyle,sibling=theorem]{definition}
	\declaretheorem[style=defstyle,sibling=theorem]{notation}
	\declaretheorem[style=defstyle,sibling=theorem]{problem}
	\declaretheorem[style=defstyle,sibling=theorem]{protocol}

	% Unnumbered definition-like statements
	\declaretheorem[style=defstyle,unnumbered,name=Application]{application*}
	\declaretheorem[style=defstyle,unnumbered,name=Construction]{construction*}
	\declaretheorem[style=defstyle,unnumbered,name=Convention]{convention*}
	\declaretheorem[style=defstyle,unnumbered,name=Definition]{definition*}
	\declaretheorem[style=defstyle,unnumbered,name=Notation]{notation*}
	\declaretheorem[style=defstyle,unnumbered,name=Problem]{problem*}
	\declaretheorem[style=defstyle,unnumbered,name=Protocol]{protocol*}

	% Remark-like statements (remarkstyle)
	\declaretheorem[style=remarkstyle,sibling=theorem]{commentary}
	\declaretheorem[style=remarkstyle,sibling=theorem]{example}
	\declaretheorem[style=remarkstyle,sibling=theorem]{exercise}
	\declaretheorem[style=remarkstyle,sibling=theorem]{motivation}
	\declaretheorem[style=remarkstyle,sibling=theorem]{note}
	\declaretheorem[style=remarkstyle,sibling=theorem]{observation}
	\declaretheorem[style=remarkstyle,sibling=theorem]{question}
	\declaretheorem[style=remarkstyle,sibling=theorem]{remark}

	% Unnumbered remark-like statements
	\declaretheorem[style=remarkstyle,unnumbered,name=Commentary]{commentary*}
	\declaretheorem[style=remarkstyle,unnumbered,name=Example]{example*}
	\declaretheorem[style=remarkstyle,unnumbered,name=Exercise]{exercise*}
	\declaretheorem[style=remarkstyle,unnumbered,name=Motivation]{motivation*}
	\declaretheorem[style=remarkstyle,unnumbered,name=Note]{note*}
	\declaretheorem[style=remarkstyle,unnumbered,name=Observation]{observation*}
	\declaretheorem[style=remarkstyle,unnumbered,name=Question]{question*}
	\declaretheorem[style=remarkstyle,unnumbered,name=Remark]{remark*}

	% Highlight-like statements (hltstyle)
	\declaretheorem[style=hltstyle,sibling=theorem]{highlight}
	\declaretheorem[style=hltstyle,sibling=theorem]{important}
	\declaretheorem[style=hltstyle,sibling=theorem]{keypoint}
	\declaretheorem[style=hltstyle,sibling=theorem]{recall}

	% Unnumbered highlight-like statements
	\declaretheorem[style=hltstyle,unnumbered,name=Highlight]{highlight*}
	\declaretheorem[style=hltstyle,unnumbered,name=Important]{important*}
	\declaretheorem[style=hltstyle,unnumbered,name=Key Point]{keypoint*}
	\declaretheorem[style=hltstyle,unnumbered,name=Recall]{recall*}

	\let\proof\relax
	\let\endproof\relax
	\declaretheorem[style=proofstyle]{proof}
}

% Define Standard Theorem Environments
\providecommand*{\usenormalthm}{%
	\providecommand{\commonfont}{\color{\accentcolor}\sffamily} % Set common font
	\providecommand{\commonsymb}{\ensuremath{\color{\accentcolor}\lrcorner}} % Set common symbol

	% Theorem Style
	\declaretheoremstyle[%
		spaceabove=\topsep, spacebelow=\topsep,
		headfont=\commonfont\ensuremath{\scriptstyle\blacktriangleright}~,
		notefont=\commonfont, bodyfont=\normalfont,
		postheadspace=5pt, numberwithin=section, qed=\commonsymb, headpunct={.}
	]{thmstyle}

	% Definition Style
	\declaretheoremstyle[%
		spaceabove=\topsep, spacebelow=\topsep,
		headfont=\commonfont\ensuremath{\scriptstyle\blacksquare}~,
		notefont=\commonfont, bodyfont=\normalfont,
		postheadspace=5pt, numberwithin=section, qed=\commonsymb, headpunct={.}
	]{defstyle}

	% Remark Style
	\declaretheoremstyle[%
		spaceabove=\topsep, spacebelow=\topsep,
		headfont=\commonfont\ensuremath{\scriptstyle\vartriangleright}~,
		notefont=\commonfont, bodyfont=\normalfont,
		postheadspace=5pt, numberwithin=section, qed=\commonsymb, headpunct={.}
	]{remarkstyle}

	% Highlight Style
	\declaretheoremstyle[%
		spaceabove=\topsep, spacebelow=\topsep,
		headfont=\commonfont\ensuremath{\scriptstyle\square}~,
		notefont=\commonfont, bodyfont=\normalfont\sffamily,
		postheadspace=5pt, numberwithin=section, qed=\commonsymb, headpunct={.}
	]{hltstyle}

	% Proof Style
	\declaretheoremstyle[%
		headfont=\commonfont, notefont=\commonfont, bodyfont=\normalfont,
		postheadspace=5pt, numbered=no, headpunct={.},
		qed=$\color{\accentcolor}\scriptstyle\blacktriangleleft$
	]{proofstyle}

	% Declare Theorem-like Environments
	\declaretheorem[style=thmstyle,name=Theorem]{theorem}
	\declaretheorem[style=thmstyle,sibling=theorem]{assertion}
	\declaretheorem[style=thmstyle,sibling=theorem]{assumption}
	\declaretheorem[style=thmstyle,sibling=theorem]{axiom}
	\declaretheorem[style=thmstyle,sibling=theorem]{claim}
	\declaretheorem[style=thmstyle,sibling=theorem]{conclusion}
	\declaretheorem[style=thmstyle,sibling=theorem]{conjecture}
	\declaretheorem[style=thmstyle,sibling=theorem]{corollary}
	\declaretheorem[style=thmstyle,sibling=theorem]{fact}
	\declaretheorem[style=thmstyle,sibling=theorem]{hypothesis}
	\declaretheorem[style=thmstyle,sibling=theorem]{lemma}
	\declaretheorem[style=thmstyle,sibling=theorem]{postulate}
	\declaretheorem[style=thmstyle,sibling=theorem]{property}
	\declaretheorem[style=thmstyle,sibling=theorem]{proposition}

	% Unnumbered Theorem-like Environments
	\declaretheorem[style=thmstyle,unnumbered,name=Theorem]{theorem*}
	\declaretheorem[style=thmstyle,unnumbered,name=Assertion]{assertion*}
	\declaretheorem[style=thmstyle,unnumbered,name=Assumption]{assumption*}
	\declaretheorem[style=thmstyle,unnumbered,name=Axiom]{axiom*}
	\declaretheorem[style=thmstyle,unnumbered,name=Claim]{claim*}
	\declaretheorem[style=thmstyle,unnumbered,name=Conclusion]{conclusion*}
	\declaretheorem[style=thmstyle,unnumbered,name=Conjecture]{conjecture*}
	\declaretheorem[style=thmstyle,unnumbered,name=Corollary]{corollary*}
	\declaretheorem[style=thmstyle,unnumbered,name=Fact]{fact*}
	\declaretheorem[style=thmstyle,unnumbered,name=Hypothesis]{hypothesis*}
	\declaretheorem[style=thmstyle,unnumbered,name=Lemma]{lemma*}
	\declaretheorem[style=thmstyle,unnumbered,name=Postulate]{postulate*}
	\declaretheorem[style=thmstyle,unnumbered,name=Property]{property*}
	\declaretheorem[style=thmstyle,unnumbered,name=Proposition]{proposition*}

	% Definition-like Environments
	\declaretheorem[style=defstyle,sibling=theorem]{application}
	\declaretheorem[style=defstyle,sibling=theorem]{construction}
	\declaretheorem[style=defstyle,sibling=theorem]{convention}
	\declaretheorem[style=defstyle,sibling=theorem]{definition}
	\declaretheorem[style=defstyle,sibling=theorem]{notation}
	\declaretheorem[style=defstyle,sibling=theorem]{problem}
	\declaretheorem[style=defstyle,sibling=theorem]{protocol}

	% Unnumbered Definition-like Environments
	\declaretheorem[style=defstyle,unnumbered,name=Application]{application*}
	\declaretheorem[style=defstyle,unnumbered,name=Construction]{construction*}
	\declaretheorem[style=defstyle,unnumbered,name=Convention]{convention*}
	\declaretheorem[style=defstyle,unnumbered,name=Definition]{definition*}
	\declaretheorem[style=defstyle,unnumbered,name=Notation]{notation*}
	\declaretheorem[style=defstyle,unnumbered,name=Problem]{problem*}
	\declaretheorem[style=defstyle,unnumbered,name=Protocol]{protocol*}

	% Remark-like Environments
	\declaretheorem[style=remarkstyle,sibling=theorem]{commentary}
	\declaretheorem[style=remarkstyle,sibling=theorem]{example}
	\declaretheorem[style=remarkstyle,sibling=theorem]{exercise}
	\declaretheorem[style=remarkstyle,sibling=theorem]{motivation}
	\declaretheorem[style=remarkstyle,sibling=theorem]{note}
	\declaretheorem[style=remarkstyle,sibling=theorem]{observation}
	\declaretheorem[style=remarkstyle,sibling=theorem]{question}
	\declaretheorem[style=remarkstyle,sibling=theorem]{remark}

	% Unnumbered Remark-like Environments
	\declaretheorem[style=remarkstyle,unnumbered,name=Commentary]{commentary*}
	\declaretheorem[style=remarkstyle,unnumbered,name=Example]{example*}
	\declaretheorem[style=remarkstyle,unnumbered,name=Exercise]{exercise*}
	\declaretheorem[style=remarkstyle,unnumbered,name=Motivation]{motivation*}
	\declaretheorem[style=remarkstyle,unnumbered,name=Note]{note*}
	\declaretheorem[style=remarkstyle,unnumbered,name=Observation]{observation*}
	\declaretheorem[style=remarkstyle,unnumbered,name=Question]{question*}
	\declaretheorem[style=remarkstyle,unnumbered,name=Remark]{remark*}

	% Highlight-like Environments
	\declaretheorem[style=hltstyle,sibling=theorem]{highlight}
	\declaretheorem[style=hltstyle,sibling=theorem]{important}
	\declaretheorem[style=hltstyle,sibling=theorem]{keypoint}
	\declaretheorem[style=hltstyle,sibling=theorem]{recall}

	% Unnumbered Highlight-like Environments
	\declaretheorem[style=hltstyle,unnumbered,name=Highlight]{highlight*}
	\declaretheorem[style=hltstyle,unnumbered,name=Important]{important*}
	\declaretheorem[style=hltstyle,unnumbered,name=Key Point]{keypoint*}
	\declaretheorem[style=hltstyle,unnumbered,name=Recall]{recall*}

	% Redefine Proof
	\let\proof\relax
	\let\endproof\relax
	\declaretheorem[style=proofstyle]{proof}
}

\ifbool{usefancythm}{\usefancythm}{} % Use fancy theorem style if needed
\ifbool{usenormalthm}{\usenormalthm}{} % Use standard theorem style if needed

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Bibliography Management with BibLaTeX
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Configure BibLaTeX package with desired settings
\providecommand{\usebiblatex}{%
	\RequirePackage[%
		hyperref=auto,         % Enable compatibility with hyperref for clickable links
		defernumbers=true,     % Delay reference number assignment until all entries are processed
		style=alphabetic,      % Use alphabetic citation style (e.g., [Doe2025])
		backref=true,          % Enable back-references to the citing pages from bibliography
		sorting=anyt,          % Sort entries by their appearance in the text (not alphabetically)
		maxalphanames=99,      % Allow up to 99 names in alphabetic citations before using et al.
		maxnames=999,          % Display up to 999 authors in citations before truncating
		backend=biber          % Use Biber for bibliography processing (recommended over BibTeX)
	]{biblatex}

	% Set bibliography font size
	\renewcommand*{\bibfont}{\small}

	% Customize back-reference text for singular and plural
	\DefineBibliographyStrings{english}{
		backrefpage={\unskip Cited on page},  % Singular back-reference format
		backrefpages={\unskip Cited on pages} % Plural back-reference format
	}
}

% Command to apply sorted bibliography entries
\providecommand{\usesrtbiblatex}{%
	\usebiblatex % Apply BibLaTeX configuration
	\DeclareBibliographyCategory{cited} % Create a 'cited' category for referenced items
	\AtEveryCitekey{\addtocategory{cited}{\thefield{entrykey}}} % Automatically add cited entries to the 'cited' category
}

% Bibliography Setup Logic (if BibLaTeX is enabled)
\providecommand{\setupbibliography}{%
	\ifthenelse{\boolean{usebiblatex}}{%
		% Use BibLaTeX configuration if enabled
		\usebiblatex
	}{%
		\ifthenelse{\boolean{usesrtbiblatex}}{%
			% Use sorted BibLaTeX configuration if enabled
			\usesrtbiblatex
		}{%
			% Fallback if BibLaTeX is not enabled
			\typeout{Default bibliography style will be used.}
			\AtEndOfPackage{%
				\renewcommand*{\backref}[1]{}      % Clear default back-reference output
				\renewcommand*{\backrefalt}[4]{%   % Modify back-reference format
					\ifcase ##1%
					\or(Cited on page~##2).%  % For a single page reference
					\else(Cited on pages~##2).%  % For multiple page references
				}
			}
		}
	}
}

% Set up bibliography management based on configuration
\setupbibliography

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Environments and Custom Commands
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% 'learned' environment with optional title (default: 'What Have We Learned?')
\newenvironment{learned}[1][What Have We Learned?]{%
	\begin{colbox}[frametitle={\normalfont\sffamily#1\smallskip\hrule}]
		}{%
	\end{colbox}
}

% 'chapternotes' environment with optional title (default: 'Chapter Notes and History')
\newenvironment{chapternotes}[1][Chapter Notes and History]{%
	\section*{#1} \addcontentsline{toc}{section}{Chapter Notes and History}
	\begin{quote}
		}{%
	\end{quote}
}

% 'problems' environment with custom enumeration (problem set style)
\newenvironment{problems}[1][Problem Set]{%
	\section*{#1} \addcontentsline{toc}{section}{Problem Set}
	\small
	\setlist[enumerate, 1]{label={$\scriptstyle\boxed{\texttt{\thechapter.\arabic*}}$}, labelsep=1.5em, left=0pt, itemsep=0.5em}
	\setlist[enumerate, 2]{label=(\arabic*), left=1em, labelsep=1em, itemsep=0.5em}
	\begin{enumerate}
		}{%
	\end{enumerate}
}

% 'caseList' enumeration with 'Case n:' label
\newlist{caseList}{enumerate}{1}
\setlist[caseList]{label=\textsc{Case~\arabic*:}, leftmargin=*}

% 'case' environment with optional title
\NewDocumentEnvironment{case}{O{}}{%
	\begin{caseList}[#1]
		}{%
	\end{caseList}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Utility Commands
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\let\oldtablecontents\tableofcontents % Save original TOC command
\renewcommand*{\tableofcontents}{\oldtablecontents\cleardoublepage\pagestyle{fancy}} % Redefine TOC with fancy style

\RequirePackage{xspace} % Provides control over spaces after macros

% Inline Commands
\providecommand*{\code}[1]{{\ttfamily#1}} % Inline code in monospaced font
\providecommand{\cat}[1]{\ensuremath{\mathsf{#1}}} % Sans-serif math mode for category names
\providecommand{\missingcitation}{\code{\small\color{Firebrick1}<Citation Missing!>}} % Mark missing citations
\providecommand{\missing}[1]{{\color{Firebrick1}#1}} % Red for missing content
\providecommand{\strike}{\bgroup\ULdepth=-.55ex\ULset} % Strike-through for deleted text
\providecommand{\stylized}[2]{\lettrine[lines=2, lhang=0.05]{\textcolor{accentcolor}{#1}}{#2}} % Drop-cap with color
\providecommand{\term}[1]{#1\index{#1}} % Mark terms for glossary/index
\providecommand{\textem}[1]{{\bfseries\color{accentcolor}#1}} % Bold and accent-colored emphasis
\providecommand{\urlref}[1]{\href{#1}{#1}} % Hyperlink URL display

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Comments and TODOs
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newif\ifComments % Toggle for displaying comments
\Commentsfalse % Set to 'true' to enable comments

% Define comment macro
\providecommand{\newcomment}[3]{%
	\ifComments
		\expandafter\newcommand\csname #3\endcsname[1]{%
			{\noindent\textcolor{#2}{\sffamily ##1 -- $\mathsf{#1}$}}%
		}%
	\else
		\expandafter\newcommand\csname #3\endcsname[1]{}%
	\fi
}

% Enable TODO notes
\RequirePackage{todonotes} % Enable TODOs

% Inline TODO notes with custom style
\providecommand{\mynote}[1]{%
	\smallskip
	\todo[inline, size=\small, bordercolor=Firebrick1!20, color=Firebrick1!20]{\sffamily#1}
	\smallskip
}

% Mark sections needing citation
\providecommand{\needcite}{%
	\todo[noline, size=\small, bordercolor=Firebrick1!20, color=Firebrick1!20]{\sffamily~Requires citation.}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Customisation of \maketitle Command
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage{hep-title}    % Title customisation
\RequirePackage{pgfornament}  % Decorative ornaments

% Title Formatting
\pretitle{\begin{center}\normalfont\huge\scshape}
		\posttitle{\par\textcolor{accentcolor}{\pgfornament[width=0.1\textwidth]{80}}\end{center}}
% Subtitle Formatting
\presubtitle{\medskip\begin{center}\Large\normalfont}
		\postsubtitle{\par\vspace{5em}\end{center}}
% Author Formatting
\preauthor{\begin{center}\normalfont\large\scshape\lineskip 0.5em\begin{tabular}[t]{c}}
			\postauthor{\end{tabular}\par\end{center}}
% Date Formatting
\predate{\vfill\begin{center}\par\bigskip\normalfont\normalsize\scshape}
		\postdate{\par\end{center}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Command for Generating the Copyright Page
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\providecommand*{\makecopyrightpage}{%
	\pagestyle{empty} % Suppress headers and footers
	\begingroup % Scope formatting
	\cleardoublepage\null\vfill % Vertically centre content
	\centering % Centre text

	% Title and author information
	\textsc{\large\@title}\par\medskip
	\textcopyright~\@date~by~\@author\par
	All rights reserved.\par

	% Author Draft Licence
	\justify
	This document is issued under the Author Draft Licence, which
	imposes strict conditions on its use, distribution, and reproduction.
	The licence permits its use solely for private academic usage, scholarly
	critique, or peer feedback. Reproduction, adaptation, or distribution of
	this work is prohibited without explicit, prior, and written permission
	from the author.

	Commercial use, instruction, and industrial applications of this work are
	explicitly forbidden. The creation of derivative works, including
	modifications, translations, or transformations, is not authorised.
	Integration of this document into machine learning or artificial intelligence
	systems is expressly prohibited. Redistribution must preserve the document in
	its original form and comply fully with the terms of this licence.

	Unauthorised use, reproduction, or distribution constitutes a violation
	of intellectual property laws. The author reserves the right to enforce
	all applicable legal protections under national and international laws
	and treaties. Requests for permissions, collaborations, or inquiries
	must be directed to the author using the contact information provided
	in this document.

	% Publication date
	\vspace{15pt}
	\begin{center}
		This version was published on \@date.\par
	\end{center}
	\vspace*{15pt}

	\endgroup % End formatting scope
	\cleardoublepage % Start a fresh page
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Code Listings and Snippets Setup
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\providecommand{\usecodelists}{%
	\RequirePackage{listings}  % Load the listings package

	% Define style for C code
	\lstdefinestyle{CStyle}{%
		language=C,                    % Set language to C
		basicstyle=\ttfamily\small,     % Use small monospaced font
		keywordstyle=\color{RoyalBlue3},% Color keywords Royal Blue
		keywordstyle=[2]\color{HotPink4}, % Color specific keywords Medium Purple
		keywordstyle=[3]\color{SpringGreen4}, % Color specific keywords Chartreuse
		keywordstyle=[4]\color{SlateBlue2},   % Color specific keywords Slate Blue
		commentstyle=\color{LightSteelBlue4}, % Color comments Light Steel Blue
		stringstyle=\color{Firebrick2},       % Color strings Firebrick
		numberstyle=\tiny\ttfamily\color{SlateGray4}, % Line number style
		numbers=left,                  % Line numbers on the left
		stepnumber=1,                  % Number every line
		numbersep=10pt,                % Space between numbers and code
		backgroundcolor=\color{white}, % White background
		breaklines=true,               % Break lines automatically
		captionpos=b,                  % Captions at the bottom
		showspaces=false,              % Don't show spaces
		showstringspaces=false,        % Don't show spaces within strings
		showtabs=false,                % Don't show tabs
		tabsize=4,                     % Tab size 4
		escapeinside={\%*}{*)}         % Escape LaTeX inside code
	}

	% Define style for C++ code
	\lstdefinestyle{CPlusPlusStyle}{%
		language=C++,                   % Set language to C++
		basicstyle=\ttfamily\small,      % Use small monospaced font
		keywordstyle=\color{RoyalBlue3}, % Royal Blue for keywords
		keywordstyle=[2]\color{HotPink4}, % Medium Purple for specific keywords
		keywordstyle=[3]\color{SpringGreen4}, % Chartreuse for specific keywords
		keywordstyle=[4]\color{SlateBlue2},   % Slate Blue for specific keywords
		commentstyle=\color{LightSteelBlue4}, % Light Steel Blue for comments
		stringstyle=\color{Firebrick2},       % Firebrick color for strings
		numberstyle=\tiny\ttfamily\color{SlateGray4}, % Line number style
		numbers=left,                   % Line numbers on the left
		stepnumber=1,                   % Number every line
		numbersep=10pt,                 % Space between numbers and code
		backgroundcolor=\color{white},  % White background
		breaklines=true,                % Automatic line breaking
		captionpos=b,                   % Captions at the bottom
		showspaces=false,               % Don't show spaces
		showstringspaces=false,         % Don't show spaces within strings
		showtabs=false,                 % Don't show tabs
		tabsize=4,                      % Tab size 4
		escapeinside={\%*}{*)}          % Escape LaTeX inside code
	}

	% Define style for Java code
	\lstdefinestyle{JavaStyle}{%
		language=Java,                  % Set language to Java
		basicstyle=\ttfamily\small,     % Use small monospaced font
		keywordstyle=\color{RoyalBlue3},% Royal Blue for keywords
		keywordstyle=[2]\color{HotPink4}, % Medium Purple for specific keywords
		keywordstyle=[3]\color{SpringGreen4}, % Chartreuse for specific keywords
		keywordstyle=[4]\color{SlateBlue2},   % Slate Blue for specific keywords
		commentstyle=\color{LightSteelBlue4}, % Light Steel Blue for comments
		stringstyle=\color{Firebrick2},     % Firebrick color for strings
		numberstyle=\tiny\ttfamily\color{SlateGray4}, % Line number style
		numbers=left,                  % Line numbers on the left
		stepnumber=1,                  % Number every line
		numbersep=10pt,                % Space between numbers and code
		backgroundcolor=\color{white}, % White background
		breaklines=true,               % Automatic line breaking
		captionpos=b,                  % Captions at the bottom
		showspaces=false,              % Don't show spaces
		showstringspaces=false,        % Don't show spaces within strings
		showtabs=false,                % Don't show tabs
		tabsize=4,                     % Tab size 4
		escapeinside={\%*}{*)}         % Escape LaTeX inside code
	}

	% Define style for Python code
	\lstdefestyle{PythonStyle}{%
		language=Python,               % Set language to Python
		basicstyle=\ttfamily\small,    % Use small monospaced font
		keywordstyle=\color{RoyalBlue3}, % Royal Blue for keywords
		keywordstyle=[2]\color{HotPink4}, % Medium Purple for specific keywords
		keywordstyle=[3]\color{SpringGreen4}, % Chartreuse for specific keywords
		keywordstyle=[4]\color{SlateBlue2},  % Slate Blue for specific keywords
		commentstyle=\color{LightSteelBlue4}, % Light Steel Blue for comments
		stringstyle=\color{Firebrick2},     % Firebrick color for strings
		numberstyle=\tiny\ttfamily\color{SlateGray4}, % Line number style
		numbers=left,                  % Line numbers on the left
		stepnumber=1,                  % Number every line
		numbersep=10pt,                % Space between numbers and code
		backgroundcolor=\color{white}, % White background
		breaklines=true,               % Automatic line breaking
		captionpos=b,                  % Captions at the bottom
		showspaces=false,              % Don't show spaces
		showstringspaces=false,        % Don't show spaces within strings
		showtabs=false,                % Don't show tabs
		tabsize=4,                     % Tab size 4
		escapeinside={\%*}{*)}         % Escape LaTeX inside code
	}

	% Define style for Rust code
	\lstdefestyle{RustStyle}{%
		language=Rust,                 % Set language to Rust
		basicstyle=\ttfamily\small,    % Use small monospaced font
		keywordstyle=\color{RoyalBlue3},% Royal Blue for keywords
		keywordstyle=[2]\color{HotPink4}, % Medium Purple for specific keywords
		keywordstyle=[3]\color{SpringGreen4}, % Chartreuse for specific keywords
		keywordstyle=[4]\color{SlateBlue2},  % Slate Blue for specific keywords
		commentstyle=\color{LightSteelBlue4}, % Light Steel Blue for comments
		stringstyle=\color{Firebrick2},     % Firebrick color for strings
		numberstyle=\tiny\ttfamily\color{SlateGray4}, % Line number style
		numbers=left,                  % Line numbers on the left
		stepnumber=1,                  % Number every line
		numbersep=10pt,                % Space between numbers and code
		backgroundcolor=\color{white}, % White background
		breaklines=true,               % Automatic line breaking
		captionpos=b,                  % Captions at the bottom
		showspaces=false,              % Don't show spaces
		showstringspaces=false,        % Don't show spaces within strings
		showtabs=false,                % Don't show tabs
		tabsize=4,                     % Tab size 4
		escapeinside={\%*}{*)}         % Escape LaTeX inside code
	}

	% Reset code box counter for each chapter
	\preto\chapter{\setcounter{codeboxcounter}{0}}

	% Define a counter for code boxes, reset at each chapter
	\newcounter{codeboxcounter}[chapter]

	% Define a new "codebox" environment for formatted code snippets
	\newenvironment{codebox}[1][Code Box]
	{
		\stepcounter{codeboxcounter} % Increment the code box counter
		\newmdenv[%
			frametitlebackgroundcolor=none, % No background for the frame title
			frametitlefont=\scshape\sffamily, % Small caps and sans serif for the title
			frametitleaboveskip=5pt, % Space above title
			frametitlerule=true, % Horizontal rule under the title
			frametitlerulecolor=black, % Rule color
			frametitlerulewidth=1pt, % Rule thickness
			frametitlealignment=\raggedright, % Align the title left
			frametitle={\thechapter.\arabic{codeboxcounter}:~##1}, % Title format with chapter and number
			linewidth=1pt, % Frame line width
			linecolor=black, % Frame line color
			innertopmargin=10pt, % Inner top margin
			innerbottommargin=10pt, % Inner bottom margin
			leftline=false, % No left vertical line
			rightline=false, % No right vertical line
		]{codeboxinner}\begin{codeboxinner}
			}{%
		\end{codeboxinner}
	}

	% Define a command for adding code with title in a code box
	\providecommand{\addCode}[4]{%
		\begin{codebox}[##1]\label{code:##2} % Start code box
			\lstinputlisting[style=##3]{##4} % Include code with chosen style
		\end{codebox} % End code box
	}
}

\ifbool{usecodelists}{\usecodelists}{\typeout{Code listings are not used.}}

% Disable the use of '@' in command names
\makeatother

% End of package
\endinput
