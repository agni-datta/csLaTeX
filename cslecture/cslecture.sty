%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% cslecture.sty â€” Academic Lectures LaTeX Package
%
% Author: Agni Datta
% Version: 1.6 (2025/06/26)
% License: LaTeX Project Public License v1.3c
% Contact: agnidatta.org@gmail.com
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                          PACKAGE OVERVIEW & USAGE
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% The `cslecture.sty` package is a comprehensive, modular, and extensible
% LaTeX package designed to facilitate the creation of academic lecture notes,
% course handouts, and scholarly documents, particularly in the context of
% computer science and mathematics. It provides a unified interface for
% document structuring, theorem environments, boxed content, custom headers,
% and a variety of utility commands, all while maintaining compatibility with
% standard LaTeX workflows.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% FEATURES
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% - **Modular Option Loading:** Selectively enable or disable features such as
%   theorem environments, boxed content, custom headers, TikZ support, and more
%   via package options. The `everything` option enables all features except
%   for the alternative page layout.
%
% - **Theorem and Proof Environments:** Provides robust, customizable theorem,
%   lemma, corollary, definition, and proof environments, with consistent
%   styling and numbering.
%
% - **Boxed Content Environments:** Includes a suite of environments for
%   highlighting content, such as `nicebox`, `simplebox`, `colbox`, and
%   `wirebox`, each with distinct visual styles for examples, remarks, or
%   code.
%
% - **Customizable Headers and Footers:** Offers enhanced header and footer
%   formatting for professional document appearance, with options for
%   instructor, course, and date information.
%
% - **Epigraph and Appendix Support:** Optional environments for epigraphs and
%   appendices, facilitating the inclusion of quotations and supplementary
%   material.
%
% - **Utility Commands:** A collection of frequently used mathematical and
%   document commands, such as set notation, indicator functions, and
%   convenient macros for common symbols.
%
% - **Verbatim and Code Listings:** Enhanced support for verbatim text and
%   code listings, with improved formatting for readability.
%
% - **Page Layout Control:** Optionally enables a refined page layout suitable
%   for academic notes, or allows the user to retain the default LaTeX layout.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% USAGE
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% To use the package, include the following in your document preamble:
%
%     \usepackage[<options>]{cslecture}
%
% Available options (all are optional and may be combined):
%   - appendices       : Enables appendix support.
%   - epigraph         : Enables the epigraph environment.
%   - niceboxs         : Loads boxed content environments.
%   - niceheaders      : Activates custom header/footer formatting.
%   - theorems         : Loads theorem/proof environments.
%   - tikz             : Loads TikZ support for diagrams.
%   - usefulcommands   : Loads utility macros.
%   - verbatim         : Loads enhanced verbatim/code environments.
%   - badlayout        : Disables the package's page layout modifications.
%   - everything       : Enables all features except `badlayout`.
%
% Example:
%     \usepackage[everything]{cslecture}
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% KEY COMMANDS AND ENVIRONMENTS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% - \course{<Course Name>}      : Sets the course name for headers/title.
% - \lecturer{<Lecturer Name>}  : Sets the lecturer's name.
% - \maketitle                  : Generates a stylized title block.
% - \begin{nicebox}[<Title>] ... \end{nicebox}   : Boxed content with title.
% - \begin{theorem} ... \end{theorem}            : Theorem environment.
% - \begin{proof} ... \end{proof}                : Proof environment.
% - \toc                        : Typesets a formatted table of contents.
% - \printbib[<style>]{<bibfile>}: Prints bibliography with style.
%
% See the package documentation for a full list of environments and commands.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% CAVEATS AND WARNINGS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% - **Package Dependencies:** Some features require external packages such as
%   `amsthm`, `mdframed`, `tcolorbox`, `tikz`, or `titlesec`. The package
%   attempts to load these as needed, but users should ensure their LaTeX
%   distribution is up to date.
%
% - **Option Interactions:** The `everything` option enables all features
%   except for the alternative page layout. If `badlayout` is specified, it
%   will override the default layout modifications.
%
% - **Compatibility:** While designed for broad compatibility, some custom
%   document classes or packages that redefine core environments (e.g.,
%   `\maketitle`, sectioning commands) may conflict with `cslecture.sty`.
%
% - **Customization:** Advanced users may further customize environments by
%   redefining the relevant commands or passing additional options to the
%   underlying packages.
%
% - **Future Updates:** As the package evolves, some commands or environments
%   may be deprecated or modified. Users are encouraged to consult the latest
%   documentation and changelog.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% SUPPORT AND FEEDBACK
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% For bug reports, feature requests, or general inquiries, please contact:
%     agnidatta.org@gmail.com
%
% The package is distributed under the LaTeX Project Public License v1.3c.
% Contributions and suggestions are welcome.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\ProvidesPackage{cslecture}[2025/06/26 v1.6 cslecture package]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\makeatletter
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Package Options
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Package option booleans
\newif\ifcslecture@Appendices           \cslecture@Appendicesfalse
\newif\ifcslecture@Epigraph             \cslecture@Epigraphfalse
\newif\ifcslecture@Niceboxs             \cslecture@Niceboxsfalse
\newif\ifcslecture@Niceheaders          \cslecture@Niceheadersfalse
\newif\ifcslecture@Pagelayout           \cslecture@Pagelayouttrue
\newif\ifcslecture@Theorems             \cslecture@Theoremsfalse
\newif\ifcslecture@Tikz                 \cslecture@Tikzfalse
\newif\ifcslecture@UsefulCommands       \cslecture@UsefulCommandsfalse
\newif\ifcslecture@Verbatim             \cslecture@Verbatimfalse

% Package options
\DeclareOption{appendices}{\cslecture@Appendicestrue}
\DeclareOption{badlayout}{\cslecture@Pagelayoutfalse}
\DeclareOption{epigraph}{\cslecture@Epigraphtrue}
\DeclareOption{niceboxs}{\cslecture@Niceboxstrue}
\DeclareOption{niceheaders}{\cslecture@Niceheaderstrue}
\DeclareOption{theorems}{\cslecture@Theoremstrue}
\DeclareOption{tikz}{\cslecture@Tikztrue}
\DeclareOption{usefulcommands}{\cslecture@UsefulCommandstrue}
\DeclareOption{verbatim}{\cslecture@Verbatimtrue}

% "everything" option: loads all features except badlayout (i.e., keeps Pagelayout true)
\DeclareOption{everything}{%
	\cslecture@Appendicestrue
	\cslecture@Epigraphtrue
	\cslecture@Niceboxstrue
	\cslecture@Niceheaderstrue
	\cslecture@Tikztrue
	\cslecture@UsefulCommandstrue
	\cslecture@Verbatimtrue
	\cslecture@Pagelayouttrue
}

% Ignore unknown options
\DeclareOption*{\PackageWarning{cslecture}{Unknown option '\CurrentOption'}}
\DeclareOption*{\relax}
\ProcessOptions\relax

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Core Programming and Utility Packages
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage{calc}                                        % Arithmetic with lengths
\RequirePackage{comment}                                     % Block comment environment
\RequirePackage{etoolbox}                                    % Logic and macro patching
\RequirePackage{ifpdf}                                       % Detect PDF output mode
\RequirePackage{iftex}                                       % Detect engine: pdfTeX, XeTeX, LuaTeX
\RequirePackage{xkeyval}                                     % Key-value parsing
\RequirePackage{xparse}                                      % Extended command/environment definitions

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Engine and Class Compatibility Warnings
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifLuaTeX
	\typeout{cslecture: rock on! LuaTeX engine detected (this is the good stuff)}
\else
	\ifXeTeX
		\typeout{cslecture: nice! XeTeX engine detected (you're doing it right)}
	\else
		\PackageWarning{cslecture}{%
			pdfTeX engine detected. Concrete math option requires LuaTeX or XeTeX for full Unicode support.
		}%
	\fi
\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Check for supported document classes (article-type classes only)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\@ifclassloaded{article}{%
	\typeout{cslecture: Detected document class: article.}
}{%
	\@ifclassloaded{extarticle}{%
		\typeout{cslecture: Detected document class: extarticle.}
	}{%
		\@ifclassloaded{scrartcl}{%
			\typeout{cslecture: Detected document class: scrartcl (KOMA-Script article).}
		}{%
			\@ifclassloaded{memoir}{%
				\typeout{cslecture: Detected document class: memoir (article mode).}
			}{%
				\PackageWarning{cslecture}{%
					Unsupported document class detected.
					This package is officially supported only for the following article-type classes:%
					article, extarticle, scrartcl, memoir.%
					Your class (\@classload) has not been tested with this package.%
					Unexpected behavior may occur.%
				}%
			}%
		}%
	}%
}%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Color
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage[x11names, dvipsnames, svgnames]{xcolor}      % Extended color support.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% PDF and Document Structure Control
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage[2.0,objcompress,compress]{bxpdfver}          % PDF version and compression management
\RequirePackage[nottoc]{tocbibind}                           % Add bibliography/lists to TOC (exclude TOC itself)
\RequirePackage{babel}                                       % Language, hyphenation
\RequirePackage{pdfpages}                                    % Include external PDFs
\RequirePackage{refcount}                                    % Reference counting

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Page Layout Configuration
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifcslecture@Pagelayout
	\RequirePackage[margin=2.5cm]{geometry}     	         % Page layout
	\RequirePackage{setspace}                                % Line spacing
	\setstretch{1.15}
\else
	\RequirePackage[margin=3.5cm]{geometry}                  % Page layout (default)
	\RequirePackage{setspace}                                % Line spacing
	\setstretch{1.0}
\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Text, Layout, and Miscellaneous Enhancements
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage[autostyle=true, csdisplay=true]{csquotes}    % Automatic quotation marks and smart citations
\RequirePackage[final]{microtype}                            % Improved justification and hyphenation
\RequirePackage[full]{textcomp}                              % Additional text symbols (e.g., degree sign)
\RequirePackage[nocompress]{cite}                            % Citation package for references
\RequirePackage[normalem]{ulem}                              % Underlining and strikethrough capabilities
\RequirePackage{emptypage}                                   % No page numbers on empty pages
\RequirePackage{lipsum}                                      % Dummy text
\RequirePackage{paralist}                                    % Long List Style environments
\RequirePackage{pifont}                                      % For using Dingbat fonts
\RequirePackage{soul}                                        % For text highlighting
\RequirePackage{xspace}                                      % Intelligent spacing after macros
\RequirePackage{xurl}                                        % Breakable URLs

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Fonts and Math Packages
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage[T1]{fontenc}                                 % T1 font encoding for better PDF output and hyphenation
\RequirePackage{amsfonts}                                    % Essential mathematical fonts (e.g., \mathbb)
\RequirePackage{amsmath}                                     % Advanced mathematical typesetting environments
\RequirePackage{amsthm}                                      % Theorem environments
\RequirePackage{amssymb}                                     % Additional mathematical symbols (e.g., \mathfrak)
\RequirePackage{bm}                                          % Bold math symbols (\bm)
\RequirePackage{bbm}                                         % Blackboard bold math symbols (\mathbbm)
\RequirePackage{lmodern}                                     % Latin Modern fonts for improved text and math rendering
\RequirePackage{mathrsfs}                                    % Script fonts for math (\mathscr)
\RequirePackage{mathtools}                                   % Enhancements to amsmath (e.g., \coloneqq)
\RequirePackage{moresize}                                    % Additional font size commands
\RequirePackage{nicefrac}                                    % Diagonal fractions in text (\nicefrac)
\RequirePackage{siunitx}                                     % Consistent SI unit formatting (\SI, \unit)
\RequirePackage[cal=cm,bb=bboldx,scr=esstix]{mathalpha}      % Unified math alphabets (calligraphic, blackboard bold, script)

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Hyperlinks & Referencing
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage{nameref}                                     % Name-based referencing
\RequirePackage[%
	bookmarksnumbered=true,                                  % Number PDF bookmarks
	breaklinks=true,                                         % Allow links to break over lines
	citecolor=DodgerBlue3,                                   % Color for citations
	colorlinks=true,                                         % Use colored links
	frenchlinks=true,                                        % Use small caps for links
	linkcolor=RoyalBlue3,                                    % Color for internal links
	pagebackref,                                             % Back-references from bibliography
	pdfencoding=auto,                                        % Automatic encoding detection
	pdfpagelabels=true,                                      % Correct page labels in PDF
	pdfpagelayout=SinglePage,                                % Single page view
	pdfstartview=FitH,                                       % Fit the page to the window
	pdfusetitle,                                             % Use document title as PDF title
	unicode=true,                                            % Support for Unicode
	urlcolor=Turquoise4                                      % Color for URLs
]{hyperref}
\AtBeginDocument{%
	\RequirePackage[capitalize,nameinlink,noabbrev]{cleveref} % Clever references
	% Sectioning names for cleveref
	\crefname{section}{\textsection}{\textsection\textsection}
	\Crefname{section}{\textsection}{\textsection\textsection}
	\crefname{subsection}{\textsection}{\textsection\textsection}
	\Crefname{subsection}{\textsection}{\textsection\textsection}
	\crefname{subsubsection}{\textsection}{\textsection\textsection}
	\Crefname{subsubsection}{\textsection}{\textsection\textsection}
}
\RequirePackage{xr}                                           % Cross-document references
% Customize backrefs
\renewcommand*{\backref}[1]{}
\renewcommand*{\backrefalt}[4]{%
	\ifcase #1\or (Cited on p.~#2).%
	\else (Cited on pp.~#2).%
	\fi
}
% Full reference combining hyperref, autoref, and nameref.
\newcommand*{\fullref}[1]{\hyperref[{#1}]{\autoref*{#1}~\nameref*{#1}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Figures and Tables
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage{adjustbox}                                     % Graphic/table boxes: scaling, trimming, framing
\RequirePackage{array}                                         % Custom column types and alignment
\RequirePackage{booktabs}                                      % High-quality horizontal rules for tables
\RequirePackage{caption}                                       % Custom caption formatting
\RequirePackage{colortbl}                                      % Cell background coloring in tables
\RequirePackage{dashbox}                                       % Dashed framed boxes
\RequirePackage{diagbox}                                       % Diagonal split table headers
\RequirePackage{fancybox}                                      % Simple framed boxes
\RequirePackage{float}                                         % Precise float positioning
\RequirePackage{framed}                                        % Framed environments (e.g., figures, text)
\RequirePackage{graphicx}                                      % Image inclusion and scaling
\RequirePackage{hhline}                                        % Horizontal lines in tables
\RequirePackage{longtable}                                     % Multi-page tables
\RequirePackage{makecell}                                      % Line breaks and formatting in cells
\RequirePackage{multicol}                                      % Multiple text columns
\RequirePackage{multirow}                                      % Multi-row cells in tables
\RequirePackage{pdflscape}                                     % Landscape pages in PDF output
\RequirePackage{placeins}                                      % Float placement control (e.g., \FloatBarrier)
\RequirePackage{ragged2e}                                      % Improved text justification
\RequirePackage{rotating}                                      % Rotated figures and tables
\RequirePackage{subcaption}                                    % Subfigures and subtables with captions
\RequirePackage{tabularray}                                    % Advanced table types and styling
\RequirePackage{tabularx}                                      % Tables with auto-stretching columns
\RequirePackage{threeparttable}                                % Notes and footnotes in tables
\RequirePackage{verbatim}                                      % Verbatim environment
\RequirePackage{wrapfig}                                       % Text wrapping around figures/tables
\RequirePackage{xhfill}                                        % Horizontal line
\RequirePackage{xtab}                                          % Page-breaking tables (alt to supertabular)
\AtBeginDocument{%
	\captionsetup{%
		font={rm,small},                                       % Roman font
		labelfont={color=black,sc,small},                      % Label in black roman
		labelsep=period,                                       % Label ends with period
		skip=5pt,                                              % Space below caption
		justification=justified                                % Center the caption
	}%
}%
\captionsetup[table]{position=bottom, skip=5pt}                % Table captions below
\captionsetup[figure]{position=bottom, skip=5pt}               % Figure captions below

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% List Customization
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage{enumitem}                                      % Precise control over list environments

% Global list spacing
\setlist{nosep}                                                % Suppress vertical spacing between items

% Enumerate: Custom labels by nesting level
\setlist[enumerate,1]{label=(\arabic*)}                        % Level 1: (1), (2), ...
\setlist[enumerate,2]{label=(\alph*)}                          % Level 2: (a), (b), ...
\setlist[enumerate,3]{label=(\Roman*)}                         % Level 3: (I), (II), ...

% Itemize: Custom symbols by nesting level
\setlist[itemize,1]{label=\ensuremath{\bullet}}                % Level 1: bullet
\setlist[itemize,2]{label=\ensuremath{\textendash}}            % Level 2: en dash
\setlist[itemize,3]{label=\ensuremath{\circ}}                  % Level 3: open circle

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Epigraphs
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifcslecture@Epigraph
	\RequirePackage{epigraph} % Load epigraph package for introductory quotations

	% Epigraph appearance configuration
	\setlength{\epigraphrule}{0.5pt}         	% Thickness of the epigraph rule
	\setlength{\epigraphwidth}{0.65\textwidth} 	% Width of the epigraph block
	\renewcommand{\textflush}{flushright}      	% Align epigraph text to the right
	\renewcommand{\epigraphsize}{\small}       	% Set epigraph font size

	% Enhanced epigraph command using xparse
	\let\oldepigraph\epigraph
	\RenewDocumentCommand{\epigraph}{mm}{%
		\oldepigraph{\textsf{#1}}{\smallskip\textsc{#2}}%
	}
\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Modern Boxes 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifcslecture@Niceboxs
	\RequirePackage[most]{tcolorbox}                              % Colored and styled boxes
	\RequirePackage[%
		skipabove=1em,                                            % Vertical space above the frame
		skipbelow=1em,                                            % Vertical space below the frame
		ntheorem,                                                 % Compatibility with theorem environments
		framemethod=Tikz                                          % Use TikZ for frame rendering
	]{mdframed}                                                   % Framed environments with theorem support
\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% TikZ Graphics
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifcslecture@Tikz
	\typeout{cslecture: Loading TikZ package}
	\RequirePackage{pgfplots}                                     % Function/data plots
	\pgfplotsset{compat=1.18}                                     % PGFPlots compatibility version
	\RequirePackage{tikz}                                         % Core TikZ package
	\RequirePackage{tikz-cd}                                      % Commutative diagrams
	\RequirePackage{tikz-3dplot}                                  % 3D coordinate plotting

	% TikZ libraries for enhanced diagrammatic capability
	\usetikzlibrary{%
		3d,
		arrows,
		arrows.meta,
		automata,
		babel,
		backgrounds,
		bending,
		calc,
		calendar,
		chains,
		circuits.ee.IEC,
		circuits.logic.IEC,
		datavisualization,
		datavisualization.formats.functions,
		decorations,
		decorations.markings,
		decorations.pathmorphing,
		decorations.shapes,
		decorations.text,
		er,
		external,
		fadings,
		fit,
		graphs,
		graphs.standard,
		hobby,
		intersections,
		lindenmayersystems,
		matrix,
		mindmap,
		patterns,
		patterns.meta,
		petri,
		plothandlers,
		plotmarks,
		positioning,
		quotes,
		scopes,
		shadows,
		shapes,
		shapes.arrows,
		shapes.callouts,
		shapes.geometric,
		shapes.misc,
		shapes.multipart,
		shapes.symbols,
		spy,
		svg.path,
		through,
		tikzmark,
		trees
	}
\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Verbatim and Code Environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifcslecture@Verbatim
	\RequirePackage{verbatim}   % Basic verbatim environment
	\RequirePackage{fancyvrb}   % Enhanced verbatim features

	% Patch: Only print non-empty lines in verbatim
	\newcommand{\savedverbatim@processline}{}
	\let\savedverbatim@processline=\verbatim@processline
	\renewcommand{\verbatim@processline}{%
		\let\verbatim@processline=\savedverbatim@processline
		\if\relax\the\verbatim@line\relax
		\else
			\the\verbatim@line\par
		\fi
	}
\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Appendices
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifcslecture@Appendices
	\RequirePackage[page, title, header, titletoc, toc]{appendix} % For handling appendices
\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Theorem Environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifcslecture@Theorems
	\typeout{cslecture: Loading theorem formatting package}
	\IfFileExists{csthm.sty}{%
		\RequirePackage[\cslecture@thmstyle]{csthm}
	}{%
		\PackageWarning{cslecture}{Package `csthm` not found.}
	} % Theorem formatting
\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Comments, Acknowledgment, Abstract
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Comment macro: \newcomment{name}{color}{command}
\NewDocumentCommand{\newcomment}{mmm}{%
	\expandafter\NewDocumentCommand\csname#3\endcsname{m}{%
		\noindent\textcolor{#2}{\sffamily##1 -- $\mathsf{#1}$}%
	}%
}

% Acknowledgment
\AtBeginDocument{%
	\NewDocumentEnvironment{acknowledgment}{o}{%
		\IfNoValueTF{#1}{\paragraph*{Acknowledgment.}}{\paragraph*{#1}}%
	}%
}

% Abstract
\RenewDocumentEnvironment{abstract}{}{%
	\begingroup
	\quotation
	\small
	\textbf{\abstractname.\ }%
	\addcontentsline{toc}{section}{\protect{\abstractname}}%
}{%
	\endquotation
	\endgroup
}

% Table of Contents
\NewDocumentCommand{\toc}{}{%
	\clearpage
	\vfill
	\begin{spacing}{1.00}
		\tableofcontents
	\end{spacing}
	\vfill
	\clearpage
}

% Bibliography 
\NewDocumentCommand{\printbib}{O{alphaurl} m}{%
	\vfill
	\clearpage
	\begin{spacing}{1.00}
		\bibliographystyle{#1}
		\bibliography{#2}
	\end{spacing}
	\vfill
	\clearpage
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Header-level formatting
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage{titlesec}                                    % Header title formatting

% Define section-specific heading fonts and sizes
\NewDocumentCommand{\sectionheadingfont}{}{\normalfont\centering\bfseries\large}
\NewDocumentCommand{\subsectionheadingfont}{}{\normalfont\bfseries\large}
\NewDocumentCommand{\subsubsectionheadingfont}{}{\normalfont\bfseries\normalsize}
\NewDocumentCommand{\paragraphheadingfont}{}{\normalfont\scshape\normalsize}
\NewDocumentCommand{\subparagraphheadingfont}{}{\normalfont\scshape\normalsize}

% Section, subsection, etc. formatting rules
\NewDocumentCommand{\setsectionformats}{}{%
	\titleformat{\section}
	{\sectionheadingfont}
	{\textsection\thesection}[.]
	{10pt}
	{}%
	\titleformat{\subsection}
	{\subsectionheadingfont}
	{\textsection\textsection\thesubsection}
	{10pt}
	{}%
	\titleformat{\subsubsection}[runin]
	{\subsubsectionheadingfont}
	{\textsection\textsection\textsection\thesubsubsection}
	{10pt}
	{}%
	\titleformat{\paragraph}[runin]
	{\paragraphheadingfont}
	{\theparagraph}
	{10pt}
	{}[.]%
	\titlespacing*{\paragraph}{0pt}{\medskipamount}{*1}%
	\titleformat{\subparagraph}[runin]
	{\subparagraphheadingfont}
	{\thesubparagraph}
	{10pt}
	{}[.]%
	\titlespacing*{\subparagraph}{0pt}{\medskipamount}{*1}%
}

% Ensure these settings are applied early to reflect updates
\AfterBeginDocument{\setsectionformats}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Paragraph formatting
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Flag for punctuation detection
\newif\ifcslecture@haspunctuation

% Check whether the second argument is empty (used for punctuation detection)
\def\cslecture@checkpunctuation#1{%
	\ifx\cslecture@checkpunctuation#1\cslecture@checkpunctuation
	\else
		\cslecture@haspunctuationtrue
	\fi
}

% Specific punctuation testers for '.', '?', '!', ':'
\def\cslecture@checkdot#1.\cslecture@delim#2\cslecture@stop{\cslecture@checkpunctuation{#2}}
\def\cslecture@checkquestion#1?\cslecture@delim#2\cslecture@stop{\cslecture@checkpunctuation{#2}}
\def\cslecture@checkexclam#1!\cslecture@delim#2\cslecture@stop{\cslecture@checkpunctuation{#2}}
\def\cslecture@checkcolon#1:\cslecture@delim#2\cslecture@stop{\cslecture@checkpunctuation{#2}}

% Main interface: Append period unless line ends with '.', '?', '!', or ':'
\def\cslecture@appendpunctuationifneeded#1{%
	\cslecture@haspunctuationfalse
	\cslecture@checkdot#1\cslecture@delim.\cslecture@delim\cslecture@stop
	\cslecture@checkquestion#1\cslecture@delim?\cslecture@delim\cslecture@stop
	\cslecture@checkexclam#1\cslecture@delim!\cslecture@delim\cslecture@stop
	\cslecture@checkcolon#1\cslecture@delim:\cslecture@delim\cslecture@stop
	#1\ifcslecture@haspunctuation \else.\fi%
}

% Skip spaces and implicit paragraphs (blank lines)
\def\cslecture@ignorewhitespaceandimplicitpars{%
	\begingroup
	\catcode13=10 %
	\@ifnextchar\relax
	{\endgroup}
	{\endgroup}%
}

% Skip spaces, implicit paragraphs, and explicit \par commands
\def\cslecture@ignoreallpars{%
	\begingroup
	\catcode13=10 %
	\@ifnextchar\par
	{\endgroup\expandafter\cslecture@ignoreallpars\@gobble}
	{\endgroup}%
}

% Section-style paragraph header with automatic punctuation and spacing
\NewDocumentCommand{\cslecture@paragraphhead}{m}{%
	\smallskip
	\noindent
	\textbf{\boldmath\ignorespaces\cslecture@appendpunctuationifneeded{#1}}%
	\hskip 0.9em plus 0.3em minus 0.3em
	\cslecture@ignorewhitespaceandimplicitpars
}

\NewDocumentCommand{\parhead}{m}{\cslecture@paragraphhead{#1}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Nested bar environment
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\long\def\cslecture@customfbox#1#2#3#4#5#6#7#8#9{%
	\leavevmode
	\begingroup
	\setbox\@tempboxa\hbox{%
		\color@begingroup
		\kern\fboxsep{#9}\kern\fboxsep
		\color@endgroup}%
	\hbox{%
		\begingroup
		\@tempdima#4\relax
		\advance\@tempdima\fboxsep
		\advance\@tempdima\dp\@tempboxa
		\expandafter\endgroup
		\expandafter\lower\the\@tempdima\hbox{%
			\vbox{%
				\hrule \@height#3 \@width#7
				#1%
				\hbox{%
					\vrule \@width#5
					\hspace{#8}%
					\vbox{%
						\vskip\fboxsep
						\copy\@tempboxa
						\vskip\fboxsep}%
					\vrule \@width#6}%
				#2%
				\hrule \@height#4\@width#7}%
		}%
	}%
	\endgroup
}

% Parameters for bar dimensions and spacing
\newcommand{\cslecture@nestedbar@topbotrulelength}{1em}
\newcommand{\cslecture@nestedbar@indent}{0.5em}

% FrameCommand helper that sets up side rule and spacing
\def\cslecture@openframebox#1#2{%
	\fboxsep=\FrameSep
	\cslecture@customfbox
	{}{}% no content above or below
	{#1}{#2}% top and bottom rule thicknesses
	\FrameRule\z@% left and right rule thickness
	\cslecture@nestedbar@topbotrulelength% horizontal rule length
	\cslecture@nestedbar@indent% indent from vertical rule
}

% Definition of the nestedbar environment
\newenvironment{nestedbar}[1][\hsize]{%
	\@ifundefined{OuterFrameSep}{%
		\@latex@error{To use nestedbar, update framed.sty to a recent version.}\@ehd}{}%
	\def\FrameCommand{\cslecture@openframebox\FrameRule\FrameRule}%
	\def\FirstFrameCommand{\cslecture@openframebox\FrameRule\z@}%
	\def\MidFrameCommand{\cslecture@openframebox\z@\z@}%
	\def\LastFrameCommand{\cslecture@openframebox\z@\FrameRule}%
	\OuterFrameSep=1ex
	\FrameSep=0pt
	\MakeFramed{\hsize#1\advance\hsize-\width\FrameRestore}%
}{%
	\endMakeFramed
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Simple fancyhdr header setup
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifcslecture@Niceheaders%
	\RequirePackage{fancyhdr}%
	\pagestyle{fancy}%
	\fancyhf{}%
	\fancyhead[LE,RO]{\rmfamily\small\textnormal{\@title}}%
	\fancyhead[RE,LO]{\rmfamily\small\thepage}%
	\fancyfoot{}%
	\setlength{\headheight}{12pt}%
\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Useful commands
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Commands for the main document
\ifcslecture@UsefulCommands
	\@ifpackageloaded{enumitem}{%
		% Define 'points' list: itemize using "--"
		\newlist{points}{itemize}{1}
		\setlist[points]{%
			label={\textendash},
			leftmargin=1em,
			itemsep=1pt,
			align=left,
			before=\smallskip,
			after=\smallskip
		}

		% Define 'codelist' list: enumerated as [\texttt{1}], [\texttt{2}], ...
		\newlist{codelist}{enumerate}{1}
		\setlist[codelist,1]{%
			label=\textcolor{gray}{\texttt{[\arabic*]}},
			leftmargin=1em,
			itemsep=1pt,
			align=left,
			before=\smallskip,
			after=\smallskip
		}

		% Define 'checkbox' list
		\newlist{checkbox}{itemize}{1}
		\setlist[checkbox]{%
			label=$\square$,
			leftmargin=1em,
			align=left
		}
		% Define \checked command to switch label for one item
		\newcommand{\checked}{\item[\checkmark]}

		% Define a rigorous description list for definitions
		\newlist{deflist}{description}{1}
		\setlist[deflist]{%
			labelwidth=0.35\textwidth,
			labelsep=1em,
			leftmargin=0.35\textwidth,
			font=\normalfont\bfseries,
			style=nextline,
			itemsep=5pt
		}
	}{}

	% Highlight color for text and math
	\newcommand{\highlightcolor}{RoyalBlue}
	\newcommand{\sethighlightcolor}[1]{\renewcommand{\highlightcolor}{#1}}

	% Text and math highlighting
	\newcommand{\emphmath}[1]{\textcolor{\highlightcolor}{\mathrm{#1}}}
	\newcommand{\emphtext}[1]{\textcolor{\highlightcolor}{#1}}
	\newcommand{\textbi}[1]{\textbf{\textit{#1}}}
	\newcommand{\textem}[1]{\textcolor{\highlightcolor}{#1}}

	% Code highlighting
	\newcommand{\code}[1]{\texttt{#1}}

	% Math small caps and bold italic
	\newcommand{\mathsc}[1]{\textnormal{\textsc{#1}}}
	\newcommand{\mathbi}[1]{\textnormal{\textbf{\textit{#1}}}}

	% Inline math shortcut
	\newcommand{\inmath}[1]{\ensuremath{#1}}

	% Hyphen in math
	\mathchardef\mathhyphen="2D

	% Put in quotes
	\newcommand{\putInQuotes}[1]{``#1''}

	% Strike-through text
	\newcommand{\strike}[1]{\bgroup\ULdepth=-.55ex\ULset\strike{#1}\egroup}

	% Highlight missing or problematic text
	\newcounter{missingctr}
	\newcommand{\missinglist}{}

	% Main \missing command
	\newcommand{\missing}[1]{%
		\refstepcounter{missingctr}%
		\label{missing:\themissingctr}%
		\gappto\missinglist{%
			\noindent\textcolor{Brown4}{%
				\ensuremath{\star}~\themissingctr~(\textsf{Missing at p.~\pageref{missing:\themissingctr}}):~#1
			}\par\medskip
		}%
		\textcolor{Brown4}{#1}%
	}

	% Print all collected missing items with page references
	\newcommand{\printmissing}{%
		\section*{Missing Content Report}%
		\missinglist
	}

	% Format for missing citations
	\newcommand{\missingcitation}{\textcolor{Brown4}{
			\refstepcounter{missingctr}%
			\label{missing:\themissingctr}%
			\gappto\missinglist{%
				\noindent\textcolor{Brown4}{%
					\ensuremath{\star}~\themissingctr~(\textsf{Missing at p.~\pageref{missing:\themissingctr}}):~#1
				}\par\medskip
			}%	
			\code{<Citation Missing>}
		}
	}

	% Double-struck Pi symbol for different engines
	\newcommand{\dsPi}{%
		\ifluatex
			\char"213F
		\else
			\ifxetex
				\char"213F
			\else
				\Pi
			\fi
		\fi
	}

	% Sans-serif Pi symbol for different engines
	\newcommand{\sansPi}{%
	\ifluatex
		\char"1D765
	\else
		\ifxetex
			\char"1D765
		\else
			\Pi
		\fi
	\fi


	% bashbox environment: code in a dashed box using adjustbox for width
	\NewDocumentEnvironment{bashbox}{}{%
		\begin{adjustbox}{minipage=\textwidth,precode=\dbox}
			\centering\medskip%
			\begin{minipage}{0.975\textwidth}
				\noindent%
				}{%
			\end{minipage}
			\medskip%
		\end{adjustbox}
	}

	\@ifpackageloaded{mdframed}{%
		% Protocol box environment
		\NewDocumentEnvironment{protocolbox}{o}
		{%
			\begin{mdframed}[
					font=\small,
					roundcorner=1.5pt,
					linewidth=0.5pt,
					skipabove=0.5\baselineskip,
					skipbelow=0.1\baselineskip,
					leftmargin=0pt,
					rightmargin=0pt,
					innerleftmargin=5pt,
					innerrightmargin=5pt,
					innertopmargin=5pt,
					innerbottommargin=5pt,
					backgroundcolor=white,
					linecolor=black
				]%
				\IfNoValueF{#1}{%
					\noindent\textnormal{\small\textbf{#1}}\par\smallskip
					\noindent\hrule height 0.4pt\relax\vspace{0.5\baselineskip}%
				}%
				\begin{points}%
					}
					{%
				\end{points}
			\end{mdframed}%
		}

		% Code list box environment
		\NewDocumentEnvironment{codelistbox}{o}
		{%
			\begin{mdframed}[%
					font=\small,
					roundcorner=1.5pt,
					linewidth=0.5pt,
					skipabove=0.5\baselineskip,
					skipbelow=0.1\baselineskip,
					leftmargin=0pt,
					rightmargin=0pt,
					innerleftmargin=5pt,
					innerrightmargin=5pt,
					innertopmargin=5pt,
					innerbottommargin=5pt,
					backgroundcolor=white,
					linecolor=black
				]%
				\IfNoValueF{#1}{%
					\noindent\textnormal{\small\textbf{#1}}\par\smallskip
					\noindent\hrule height 0.4pt\relax\vspace{0.5\baselineskip}%
				}%
				\begin{codelist}%
					}
					{%
				\end{codelist}
			\end{mdframed}%
		}

		\NewDocumentEnvironment{simplebox}{o}
		{%
			\begin{mdframed}[%
					font=\small,
					roundcorner=1.5pt,
					linewidth=0.5pt,
					skipabove=0.5\baselineskip,
					skipbelow=0.1\baselineskip,
					leftmargin=0pt,
					rightmargin=0pt,
					innerleftmargin=5pt,
					innerrightmargin=5pt,
					innertopmargin=5pt,
					innerbottommargin=5pt,
					backgroundcolor=white,
					linecolor=black
				]%
				\IfNoValueF{#1}{%
					\noindent\textnormal{\small\textbf{#1}}\par\smallskip
					\noindent\hrule height 0.4pt\relax\vspace{0.5\baselineskip}%
				}%
				}
				{%
			\end{mdframed}%
		}

		\NewDocumentEnvironment{colbox}{o}
		{%
			\begin{mdframed}[
					font=\normalfont\small,
					frametitlefont=\bfseries,
					hidealllines=true,
					backgroundcolor=gray!15,
					skipabove=0.5\baselineskip,
					skipbelow=0.1\baselineskip,
					leftmargin=0pt,
					rightmargin=0pt,
					innerleftmargin=10pt,
					innerrightmargin=10pt,
					innertopmargin=10pt,
					innerbottommargin=10pt,
					roundcorner=1pt
				]%
				\IfNoValueF{#1}{%
					\noindent\textnormal{\small\textbf{#1}}\par\smallskip
					\noindent\hrule height 0.4pt\relax\vspace{0.5\baselineskip}%
				}%
				}{%
			\end{mdframed}
		}
	}{}

	\@ifpackageloaded{tcolorbox}{%
		% Wire box environment
		\newtcolorbox{wirebox}{%
			colframe=black,
			colback=white,
			sharp corners,
			boxrule=0.5pt,
			coltitle=black,
			colbacktitle=white,
			boxsep=5pt,
			top=0pt,
			bottom=0pt,
			left=5pt,
			right=5pt
		}
	}{}
\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Title Information Section
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Define course and lecturer commands, storing values in internal macros
\newcommand{\course}[1]{\def\@course{#1}}
\newcommand{\lecturer}[1]{\def\@lecturer{#1}}

% Custom maketitle command
\renewcommand{\maketitle}{%
	\thispagestyle{plain}
	\begin{mdframed}[tikzsetting={draw=black},linewidth=0.5pt]
		\bfseries\Large\bigskip
		\ifx\@title\undefined\else
			\@title\par\bigskip
		\fi
		\normalfont\normalsize\noindent
		\ifx\@author\undefined\else
			\textbf{Author:}~\@author
		\fi
		\hfill
		\ifx\@date\undefined\else
			\textbf{Date:}~\@date\par
		\fi
		\normalfont\normalsize\noindent
		\ifx\@lecturer\undefined\else
			\textbf{Lecturer:}~\@lecturer
		\fi
		\hfill
		\ifx\@course\undefined\else
			\textbf{Course:}~\@course\medskip
		\fi
	\end{mdframed}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\makeatother
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% End of package
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\endinput
