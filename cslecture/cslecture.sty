%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% cslecture Package
%% Version: v1
%% Date: 2024/04/26
%% Description: This package provides comprehensive settings and environments tailored for academic lectures and documents in computer science.
%% Author: Agni Datta
%% Email: Not provided
%% Maintainer: Agni Datta
%% License: Not specified
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Introduction:
%   - The cslecture package offers a suite of tools and settings designed to enhance the creation of computer science lecture notes and academic documents.
%   - It provides custom environments for theorems, definitions, and proofs, along with advanced formatting options for sections, tables of contents, and bibliographies.
%   - The package integrates various LaTeX packages to offer a cohesive and feature-rich document preparation system tailored for computer science academia.
% Features:
%   - Custom theorem-like environments with coloured styling
%   - Advanced section formatting with accent colours
%   - Customizable table of contents
%   - BibLaTeX integration for sophisticated bibliography management
%   - Enhanced proof environments with custom QED symbols
%   - Support for algorithms, code snippets, and mathematical content
%   - Customizable page layout and typography settings
%   - Tools for TODO notes and annotations in documents
% Usage:
%   \usepackage{cslecture}
% Options:
%   biblatex - Enables BibLaTeX support for bibliography management
% Dependencies:
%   This package relies on various LaTeX packages. Please refer to the package documentation for a full list of dependencies.
% Note:
%   This package is designed for use with LaTeX2e and may require recent versions of some dependent packages.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Package Metadata
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\providecommand{\filename}{cslecture}     % Define the package filename
\providecommand{\fileversion}{v1}         % Define the package version
\providecommand{\filedate}{2024/04/26}    % Define the package date
\providecommand{\fileauthor}{Agni Datta}  % Define the package author

\NeedsTeXFormat{LaTeX2e}  % Ensure compatibility with LaTeX2e

% Provide package information upon loading
\AtEndOfPackage{%
	\ProvidesPackage{\filename}[\filedate\space\fileversion\space(\fileauthor)] % Log package loading
	\typeout{Package `\filename', \fileversion, <\filedate>} % Display package information
}

\makeatletter % Enable the use of '@' in command names

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Package Options
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Define internal flags for package options
\newif\ifbiblatex % Flag to enable BibLaTeX

% Declare package options
\DeclareOption{biblatex}{\biblatextrue} % Enable BibLaTeX support

% Handle unknown options
\DeclareOption*{\PackageWarning{\filename}{Unknown option '\CurrentOption'}} % Warn for unknown options

% Process the declared options
\ProcessOptions\relax

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Programming Tools
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage{ifxetex} % Detects XeTeX compilation
\RequirePackage{ifluatex} % Detects LuaLaTeX compilation
\RequirePackage{calc} % Enables various LaTeX calculations
\RequirePackage{etoolbox} % Offers advanced conditional programming features
\RequirePackage{xpatch} % Enhances etoolbox with flexible command patching capabilities

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Macro Definition Tools
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage{xparse} % Facilitates the definition of complex macros
\RequirePackage{xkeyval} % Enables advanced key-value argument processing
\RequirePackage{kvoptions} % Manages key-value options in package and class files

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% PDF Management and External File Handling
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[2.0, objcompress, compress]{bxpdfver} % Manage PDF version and compression settings
\RequirePackage{comment} % Customize list environments with conditional comments
\RequirePackage{pdfpages} % Include external PDF pages in the document
\RequirePackage{pdflscape} % Enable landscape pages in PDFs
\RequirePackage{ragged2e} % Provides enhanced justification options compared to standard LaTeX commands

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Package for Support for Colour
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[x11names, dvipsnames, svgnames]{xcolor} % Provides color support with extended color schemes

% Declare and initialize the variable \accentcolor
\providecommand{\declvar}[2]{\def#1{#2}} % Command to declare variables
\declvar{\accentcolor}{RoyalBlue4} % Default accent color

% Define the \setaccentcolor command to update \accentcolor based on user input
\providecommand{\setaccentcolor}[1]{%
	\ifx\relax#1\relax % Check if the input is empty
		\declvar{\accentcolor}{RoyalBlue4} % Reset to default blue if no input
	\else
		\declvar{\accentcolor}{#1} % Set to user-specified color
	\fi
	\colorlet{accentcolor}{\accentcolor} % Update the color definition
}

% Example usage:
% \setaccentcolor{RoyalBlue4} % Sets accent color to RoyalBlue4
% \setaccentcolor{} % Resets to the default blue

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Language and Typographic Settings
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Load language support
\RequirePackage[english]{babel}  % Set language to English
\RequirePackage[autostyle=true, csdisplay=true]{csquotes} % Enhanced quotations

% Load microtype conditionally based on the engine
\RequirePackage[babel=true]{microtype} % For both XeTeX and LuaLaTeX
% Conditional options based on engine
\ifxetex
\PassOptionsToPackage{protrusion=true}{microtype} % Additional options for XeTeX
\fi
\ifluatex
\PassOptionsToPackage{protrusion=true, expansion=true}{microtype}   % Additional options for LuaLaTeX
\fi

% Configure line spacing and text symbols
\RequirePackage[onehalfspacing]{setspace}  % One and a half line spacing
\RequirePackage[full]{textcomp}  % Extra text symbols
\RequirePackage[normalem]{ulem}  % Underlining and strikethrough

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Page Layout Configuration
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Geometry settings for an A4-sized layout
\RequirePackage[%
	a4paper,               % Define A4 paper size
	tmargin=2.50cm,        % Set top margin
	bmargin=2.50cm,        % Set bottom margin
	lmargin=3.50cm,        % Set left margin
	rmargin=3.50cm,        % Set right margin
	footskip=1.00cm        % Set distance from text to footer
]{geometry}                % Load geometry package for page layout management

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Customization of Headers and Footers
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage{fancyhdr} % Load the fancyhdr package for custom headers and footers

% Clear all header and footer fields
\fancyhf{} % Remove existing header and footer content

% Configure header layout
\fancyhead[LE, RO]{\normalfont\small\sffamily\thepage} % Page number on the left side of even pages and right side of odd pages
\fancyhead[LO, RE]{\normalfont\small\sffamily\scshape\@title} % Title on right side of even pages and left side of odd pages

% Define the thickness of the header rule
\renewcommand{\headrulewidth}{0.25pt} % Set header rule thickness

% Apply the custom page style
\pagestyle{fancy} % Use the fancy page style

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Font and Mathematics Packages
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[T1]{fontenc}            % Enable T1 font encoding for improved font output in PDF
\RequirePackage{amsfonts}               % Provides essential mathematical fonts (e.g., \mathbb)
\RequirePackage{amssymb}                % Supplies additional mathematical symbols (e.g., \mathfrak)
\RequirePackage{amsmath}                % Enables advanced mathematical formatting and environments
\RequirePackage{amsthm}                 % Facilitates the creation of theorem-like environments
\RequirePackage{thmtools}               % Enhances theorem-related functionalities, such as custom theorem styles
\RequirePackage{nicefrac}               % Improves the visual appearance of fractions with diagonal slashes
\RequirePackage{siunitx}                % Ensures consistent formatting of SI units (e.g., \SI, \unit)
\RequirePackage{fontspec}               % Allows the use of custom fonts with XeLaTeX and LuaLaTeX
\RequirePackage{unicode-math}           % Provides support for Unicode math fonts, enabling better math typography

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Font Setup Command Definitions
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Command to configure Latin Modern fonts for text, mathematics, and monospaced typesetting
\setmainfont[%
	ItalicFont = lmroman10-italic.otf,            % Italic variant for emphasis
	SmallCapsFont = lmromancaps10-regular.otf,    % Small caps variant for stylistic elements
	SmallCapsFeatures = {RawFeature=+smcp},       % Enable small caps feature
	BoldFont = lmroman10-bold.otf,                % Bold variant for headings
	BoldItalicFont = lmroman10-bolditalic.otf,    % Bold italic for extra emphasis
	RawFeature = {+calt, +case, +hlig, +kern, +liga, +lnum, +mark, +mkmk, +pnum} % Advanced typographic features
]{lmroman10-regular.otf} % Set the main text font
\setmathfont[%
	RawFeature = {+calt, +case, +hlig, +kern, +liga, +lnum, +mark, +mkmk, +pnum} % Advanced typographic features
]{latinmodern-math.otf} % Set the mathematics font
\setsansfont[%
	ItalicFont = NewCMSans10-Oblique.otf,         % Italic variant for emphasis
	SmallCapsFont = NewCMSans10-Book.otf,         % Small caps variant for stylistic elements
	SmallCapsFeatures = {RawFeature=+smcp},       % Enable small caps feature
	BoldFont = NewCMSans10-Bold.otf,              % Bold variant for headings
	BoldItalicFont = NewCMSans10-BoldOblique.otf, % Bold italic for extra emphasis
	RawFeature = {+calt, +case, +hlig, +kern, +liga, +lnum, +mark, +mkmk, +pnum} % Advanced typographic features
]{NewCMSans10-Book.otf} % Set the sans-serif font
\setmonofont[%
	Scale=0.90,                                  % Scale for monospaced font
	SmallCapsFeatures = {RawFeature=+smcp},     % Enable small caps feature
	RawFeature = {+calt, +case, +dlig, +kern, +liga, +lnum, +mark, +mkmk, +pnum} % Advanced typographic features
]{Anonymous Pro} % Define the monospaced font

% Command to set the default font size
\providecommand{\setglobalfontsize}[1]{\def\deffontsize{#1}} % Command to set font size
\AtEndPreamble{%
	% Resolve conflicts with existing math alphabet definitions
	\let\mathbfcal\relax
	\RequirePackage[%
		bb=bboldx,  % Extended Blackboard bold options for math notation
		cal=cm      % Classic calligraphic font style for math symbols
	]{mathalpha}  	% Additional math font styles for diverse notation
				    
	% Set a default font size if \deffontsize is not defined
	\ifx\deffontsize\undefined
		\setglobalfontsize{10pt} % Default to 10pt
	\fi
				    
	% Load the fontsize package
	\RequirePackage[fontsize=\deffontsize]{fontsize} % Load the fontsize package
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Custom Sectioning Commands
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[explicit]{titlesec} % Package for customizing sectioning commands

% Command for margin section numbering
\providecommand{\marginsecnumber}[1]{%
	\makebox[0pt][r]{#1\hspace{7.5pt}}%
}

% Section formatting
\titleformat{\section}[block]%
    {\Large\sffamily\scshape\color{accentcolor}} % Font and color for section title
    {\Large\marginsecnumber\thesection} % Section number format
    {0pt} % Space between number and title
    {#1\hrule} % Title formatting
        
\titlespacing*{\section}{0pt}{10pt}{-7.5pt} % Spacing before and after section title

% Command for margin subsection numbering
\providecommand{\marginsubsecnumber}[1]{%
	\makebox[0pt][r]{#1\hspace{7.5pt}}%
}

% Subsection formatting
\titleformat{\subsection}[block]%
    {\large\sffamily\scshape\color{accentcolor}} % Font and color for subsection title
    {\large\marginsubsecnumber\thesubsection} % Subsection number format
    {0pt} % Space between number and title
    {#1} % Title formatting
        
% Command for margin subsubsection numbering
\providecommand{\marginsubsubsecnumber}[1]{%
	\makebox[0pt][r]{#1\hspace{7.5pt}}%
}

% Subsubsection formatting
\titleformat{\subsubsection}[runin]%
    {\large\sffamily\scshape\color{accentcolor}} % Font and color for subsubsection title
    {\large\marginsubsubsecnumber\thesubsubsection} % Subsubsection number format
    {0pt} % Space between number and title
    {#1.} % Title formatting

% Command for margin paragraph numbering
\providecommand{\marginparnumber}[1]{%
	\makebox[0pt][r]{#1\hspace{7.5pt}} % Create a box with zero width, right-aligned
}

% Paragraph formatting
\titleformat{\paragraph}[runin]%
    {\normalsize\bfseries\color{accentcolor}} % Font and color for paragraph title
    {\marginparnumber\theparagraph} % Paragraph number format
    {0pt} % Space between number and title
    {#1.} % Title formatting

\titlespacing*{\paragraph}{0pt}{5pt}{5pt} % Spacing before and after paragraph title

% Command for margin subparagraph numbering
\providecommand{\marginsubparnumber}[1]{%
	\makebox[0pt][r]{#1\hspace{7.5pt}} % Create a box with zero width, right-aligned
}

% Subparagraph formatting
\titleformat{\subparagraph}[runin]%
    {\normalsize\sffamily\scshape\color{accentcolor}} % Font and color for subparagraph title
    {\marginsubparnumber\thesubparagraph} % Subparagraph number format
    {0pt} % Space between number and title
    {#1.} % Title formatting
    
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Table of Contents Customization
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[titles]{tocloft}  % Load tocloft for customizing the table of contents

% Adjust the vertical spacing after section, subsection, and subsubsection numbers
\renewcommand{\cftsecafterpnum}{\vskip1pt}        % Vertical space after section numbers
\renewcommand{\cftsubsecafterpnum}{\vskip1pt}     % Vertical space after subsection numbers
\renewcommand{\cftsubsubsecafterpnum}{\vskip1pt}  % Vertical space after subsubsection numbers

% Specify font styles for Table of Contents entries
\renewcommand{\cftsecfont}{\normalsize\scshape}         % Font style for sections (normal size, small caps)
\renewcommand{\cftsubsecfont}{\normalsize}              % Font style for subsections (normal size)
\renewcommand{\cftsubsubsecfont}{\normalsize}           % Font style for subsubsections (normal size)

% Configure the depth of section numbering and Table of Contents entries
\setcounter{secnumdepth}{3} % Set the depth for section numbering
\setcounter{tocdepth}{2}    % Set the depth of Table of Contents entries

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Hyperlinks and Metadata Configuration
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[pdfusetitle]{hyperref}    % Provides hyperlink capabilities and document metadata management
\RequirePackage{bookmark}                 % Manages PDF bookmarks for easier navigation
\RequirePackage{xurl}                     % Automatically breaks long URLs to fit within the document

% Configure hyperref settings to enhance document appearance and metadata
\hypersetup{%
	pdfsubject={computer science},    % Set the subject of the PDF; fallback to \@course if not defined
	pdfkeywords={computer science},   % Define keywords for the PDF; fallback to \@course if not defined
	colorlinks=true,                  % Enable coloured hyperlinks
	citecolor=accentcolor,            % Set colour for citation links
	linkcolor=accentcolor,            % Set colour for internal document links
	urlcolor=accentcolor,             % Set color for URLs
	frenchlinks=true,                 % Use French-style links with small caps
	unicode=true,                     % Enable Unicode characters in links
	bookmarksnumbered=true,           % Number bookmarks in the PDF for better navigation
	breaklinks=true,                  % Allow line breaks in long URLs
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Redefine the \maketitle command
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\providecommand{\course}[1]{%
	\providecommand{\@course}{#1}  % Define or update the course command
}

\providecommand{\lecturer}[1]{%
	\providecommand{\@lecturer}{#1}  % Define or update the lecturer command
}

\renewcommand{\maketitle}{%
	\thispagestyle{plain}  % Use plain page style for the title page
				    
	\begin{tboxed}
		\bfseries\Large\bigskip % Title Section
		\ifx\@title\undefined
		\else
			\@title\par\bigskip
		\fi
		\normalfont\normalsize\noindent % Author and Date
		\ifx\@author\undefined
		\else
			\textbf{Author:} \@author
		\fi\hfill
		\ifx\@date\undefined
		\else
			\textbf{Date:} \@date\par
		\fi
		\normalfont\normalsize\noindent % Lecturer and Course
		\ifx\@lecturer\undefined
		\else
			\textbf{Lecturer:} \@lecturer
		\fi\hfill
		\ifx\@course\undefined
		\else
			\textbf{Course:} \@course\medskip
		\fi
	\end{tboxed}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Package for customizing lists
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage{enumitem} % Use the enumitem package for adjusting the appearance and behaviour of list environments

% Global settings for lists
\setlist{nosep, noitemsep} % Remove extra vertical spacing between items in all list environments

% Customize enumerate labels
\setlist[enumerate, 1]{label=(\arabic*)} % Label format for the first level of enumeration
\setlist[enumerate, 2]{label=(\alph*)}  % Label format for the second level of enumeration

% Redefine bullet symbols for itemize environment
\renewcommand{\labelitemi}{\ensuremath{\color{accentcolor}\bullet}} % Bullet symbol for first level
\renewcommand{\labelitemii}{\ensuremath{\color{accentcolor}\circ}}   % Circle symbol for second level
\renewcommand{\labelitemiii}{\ensuremath{\color{accentcolor}\ast}}    % Asterisk symbol for third level
\renewcommand{\labelitemiv}{\ensuremath{\color{accentcolor}\textasteriskcentered}} % Asterisk symbol for fourth level

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Packages for Typesetting Algorithms
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Load the algorithm2e package with specific options for algorithm formatting
\RequirePackage[%
	algoruled,     % Encloses algorithms in a ruled style for improved readability
	linesnumbered, % Enables line numbering for easier reference to individual steps
	longend,       % Manages long end statements for a cleaner layout
	vlined         % Adds vertical lines to enhance the structure
]{algorithm2e}

% Customize the appearance and style of the algorithms
\SetAlFnt{\small}               % Set the algorithm text to a small font size for a more compact presentation
\SetAlCapFnt{\normalsize}       % Use a normal font size for captions to provide emphasis
\SetAlCapNameFnt{\normalsize}   % Set the font size of algorithm names to normal for better visibility
\SetAlgoCaptionSeparator{.}     % Use a period as a separator between the caption and the algorithm content
\SetAlgoNlRelativeSize{-2}      % Reduce the size of line numbers to lessen distraction from the main text
\SetNlSty{texttt}{[}{]}         % Style line numbers in a typewriter font, enclosed in square brackets

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Package for Creating Framed Environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Load the mdframed package to create customizable framed environments
\RequirePackage[%
	skipabove=10pt,               % Vertical space above the frame
	skipbelow=10pt,               % Vertical space below the frame
	ntheorem,                     % Use with the ntheorem package for theorem-like environments
	framemethod=Tikz              % Use TikZ for frame styling
]{mdframed} % Configure vertical skip distances and enable TikZ for styling

% Load the tcolorbox package for advanced colour box options
\RequirePackage[most]{tcolorbox} % Include extensive features for colored boxes

% Define a custom-framed environment with TikZ settings
\newmdenv[%
	tikzsetting={draw=black},     % Set the border colour of the frame to black
	backgroundcolor=none,         % Set background to transparent
	skipabove=10pt,               % Vertical space above the frame
	skipbelow=10pt,               % Vertical space below the frame
	innerleftmargin=7.5pt,       % Left margin inside the frame
	innerrightmargin=7.5pt,      % Right margin inside the frame
	innertopmargin=10pt,         % Top margin inside the frame
	innerbottommargin=10pt,      % Bottom margin inside the frame
	roundcorner=1pt              % Set rounded corners with a radius of 1pt
]{tboxed} % Custom framed environment named "tboxed"

% Define another custom-framed environment with specific formatting
\newmdenv[%
	hidealllines=true,            % Hide all frame lines
	backgroundcolor={accentcolor!50!white}, % Set a semi-transparent background color
	skipabove=10pt,               % Vertical space above the frame
	skipbelow=10pt,               % Vertical space below the frame
	innerleftmargin=7.5pt,        % Left margin inside the frame
	innerrightmargin=7.5pt,       % Right margin inside the frame
	innertopmargin=10pt,          % Top margin inside the frame
	innerbottommargin=10pt,       % Bottom margin inside the frame
	roundcorner=2pt               % Set rounded corners with a radius of 2pt
]{colbox} % Custom framed environment named "colbox"

% Create a new counter for construction
\newcounter{constructioncounter}[section]

% Define the "construction" environment using mdframed
\newenvironment{construction}[1][Construction]{%
	\refstepcounter{constructioncounter} % Increment the counter
	\newmdenv[%
		font=\normalfont\small, % Font for the content
		frametitlebackgroundcolor=none, % No background colour for the title
		frametitlefont=\scshape\sffamily\color{accentcolor}, % Title font style
		frametitle={Construction~\thesection.\theconstructioncounter~(#1).}, % Title format
		frametitlerulewidth=0.75pt, % Set the rule thickness
		linewidth=0.75pt, % Frame line width
		linecolor=black, % Frame line colour
		innertopmargin=7.5pt, % Top inner margin
		innerbottommargin=7.5pt, % Bottom inner margin
		innerleftmargin=5pt, % Left inner margin
		innerrightmargin=5pt, % Right inner margin
		frametitlerule=true, % Add a rule under the title
		leftline=false, % No left vertical line
		rightline=false % No right vertical line
	]{constructioninner}%
	\begin{constructioninner}
		}{%
	\end{constructioninner}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Abstracts and Appendices
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Load the abstract package with advanced options
\RequirePackage[%
	runin,      % Format abstract as a run-in
	addtotoc    % Include the abstract in the table of contents
]{abstract}

% Load the appendix package with specific options
\RequirePackage[%
	toc,        % Include appendices in the table of contents
	page,       % Start each appendix on a new page
	title,      % Prefix 'Appendix' to appendix titles
	header,     % Prefix 'Appendix' to headers on appendix pages
	titletoc    % Prefix 'Appendix' in the table of contents entries
]{appendix} % Provides advanced appendix handling commands

% Format appendix page name
\xpretocmd{\appendixpagename}{\Large\sffamily\scshape\color{accentcolor}}{}{} % Format appendix page name

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Customizations for verbatim environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage{verbatim}  % Allows inclusion of unformatted text or code snippets
\RequirePackage{fancyvrb}  % Provides enhanced verbatim environments and features

% Save the original verbatim process line command
\providecommand{\savedverbatim@processline}{}
\let\savedverbatim@processline=\verbatim@processline

% Redefine the verbatim process line command
\renewcommand{\verbatim@processline}{%
	\let\verbatim@processline=\savedverbatim@processline  % Restore the original command
	\if\relax\the\verbatim@line\relax  % Check if the line is empty
	\else
		\the\verbatim@line\par  % Print the verbatim line
	\fi
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Packages for Footnotes and Multi-Column Formatting
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[bottom, multiple, hang]{footmisc} % Customizes footnote formatting: positioning, multiple footnotes per page, and hanging indentation
\RequirePackage{footnote}               % Allows footnotes within the document
\RequirePackage{multicol}               % Supports multi-column formatting

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Packages for Tables and Figures
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage{adjustbox}           % Advanced adjustment and manipulation of content
\RequirePackage{array}               % Enhancements for array and tabular environments
\RequirePackage{booktabs}            % Professional-quality lines and rules in tables
\RequirePackage{longtable}           % Support for tables that span multiple pages
\RequirePackage{multirow}            % Allows cells to span multiple rows in tables
\RequirePackage{tabularx}            % Flexible tables with adjustable width
\RequirePackage{wrapfig}             % Text wrapping around figures

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Packages for Captions and Graphics
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[font={rm, sc}]{caption} % Customizes caption formatting with font options
\RequirePackage{float} % Precise control over the placement of figures and tables
\RequirePackage{graphics} % Standard package for graphics inclusion
\RequirePackage{graphicx} % Inclusion of images in various formats
\RequirePackage{subcaption} % Subfigures and subcaptions within figures

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Definition of New Environments with Colour Box
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Theorem Style
\declaretheoremstyle[%
	spaceabove=\topsep,
	spacebelow=\topsep,
	postheadspace=5pt,
	headformat={\makebox[0pt][r]{\NUMBER\hspace{7.5pt}}\NAME \NOTE},
	headfont=\sffamily\color{accentcolor},
	notefont=\sffamily\color{accentcolor},
	bodyfont=\normalfont,
	numberwithin=section,
	qed=$\color{accentcolor}\scriptscriptstyle\clubsuit$,
	headpunct={.}
]{thmstyle}

% Definition Style
\declaretheoremstyle[%
	spaceabove=\topsep,
	spacebelow=\topsep,
	postheadspace=5pt,
	headformat={\makebox[0pt][r]{\NUMBER\hspace{7.5pt}}\NAME \NOTE},
	headfont=\sffamily\color{accentcolor},
	notefont=\sffamily\color{accentcolor},
	bodyfont=\normalfont,
	numberwithin=section,
	qed=$\color{accentcolor}\scriptscriptstyle\clubsuit$,
	headpunct={.}
]{defstyle}

% Remark Style
\declaretheoremstyle[%
	spaceabove=\topsep,
	spacebelow=\topsep,
	postheadspace=5pt,
	headformat={\makebox[0pt][r]{\NUMBER\hspace{7.5pt}}\NAME \NOTE},
	headfont=\sffamily\color{accentcolor},
	notefont=\sffamily\color{accentcolor},
	bodyfont=\normalfont,
	numberwithin=section,
	qed=$\color{accentcolor}\scriptscriptstyle\blacktriangleright$,
	headpunct={.}
]{remarkstyle}

% Highlight Style
\declaretheoremstyle[%
	spaceabove=\topsep,
	spacebelow=\topsep,
	postheadspace=5pt,
	headformat={\makebox[0pt][r]{\NUMBER\hspace{7.5pt}}\NAME \NOTE},
	headfont=\sffamily\color{accentcolor},
	notefont=\sffamily\color{accentcolor},
	bodyfont=\normalfont\sffamily,
	numberwithin=section,
	qed=$\color{accentcolor}\scriptscriptstyle\blacklozenge$,
	headpunct={.}
]{hltstyle}

% Theorem and related environments
\declaretheorem[style=thmstyle,name=Theorem]{theorem}
\declaretheorem[style=thmstyle,sibling=theorem]{assumption}
\declaretheorem[style=thmstyle,sibling=theorem]{claim}
\declaretheorem[style=thmstyle,sibling=theorem]{conjecture}
\declaretheorem[style=thmstyle,sibling=theorem]{corollary}
\declaretheorem[style=thmstyle,sibling=theorem]{lemma}
\declaretheorem[style=thmstyle,sibling=theorem]{property}
\declaretheorem[style=thmstyle,sibling=theorem]{proposition}

% Definition and related environments
\declaretheorem[style=defstyle,sibling=theorem]{definition}
\declaretheorem[style=defstyle,sibling=theorem]{example}
\declaretheorem[style=defstyle,sibling=theorem]{exercise}
\declaretheorem[style=defstyle,sibling=theorem]{problem}
\declaretheorem[style=defstyle,sibling=theorem]{question}

% Remark and related environments
\declaretheorem[style=remarkstyle,sibling=theorem]{note}
\declaretheorem[style=remarkstyle,sibling=theorem]{remark}
\declaretheorem[style=remarkstyle,sibling=theorem]{solution}

% Highlight styles
\declaretheorem[style=hltstyle,name=Important]{important}
\declaretheorem[style=hltstyle]{highlight}
\declaretheorem[style=hltstyle]{keypoint}

% Define a custom QED symbol with accent color
\providecommand{\QEDsymbol}{\color{\accentcolor}\ensuremath{\blacksquare}} % Define QED symbol with accent color
\renewcommand{\qedsymbol}{\QEDsymbol} % Use custom QED symbol for proof environments

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Cleveref Settings
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage{cleveref} % Load the cleveref package for intelligent cross-referencing

% Define plural and singular names for various types of references
\Crefname{case}{Case}{Cases}
\Crefname{chapter}{Chapter}{Chapters}
\Crefname{claim}{Claim}{Claims}
\Crefname{conjecture}{Conjecture}{Conjectures}
\Crefname{corollary}{Corollary}{Corollaries}
\Crefname{definition}{Definition}{Definitions}
\Crefname{example}{Example}{Examples}
\Crefname{exercise}{Exercise}{Exercises}
\Crefname{fact}{Fact}{Facts}
\Crefname{highlight}{Highlight}{Highlights}
\Crefname{important}{Important}{Important Points}
\Crefname{keypoint}{Keypoint}{Keypoints}
\Crefname{lemma}{Lemma}{Lemmas}
\Crefname{note}{Note}{Notes}
\Crefname{problem}{Problem}{Problems}
\Crefname{property}{Property}{Properties}
\Crefname{proposition}{Proposition}{Propositions}
\Crefname{question}{Question}{Questions}
\Crefname{remark}{Remark}{Remarks}
\Crefname{section}{Section}{Sections}
\Crefname{solution}{Solution}{Solutions}
\Crefname{subsection}{Subsection}{Subsections}
\Crefname{subsubsection}{Subsubsection}{Subsubsections}
\Crefname{theorem}{Theorem}{Theorems}

% Define lowercase names for various types of references
\crefname{case}{case}{cases}
\crefname{chapter}{chapter}{chapters}
\crefname{claim}{claim}{claims}
\crefname{conjecture}{conjecture}{conjectures}
\crefname{corollary}{corollary}{corollaries}
\crefname{definition}{definition}{definitions}
\crefname{example}{example}{examples}
\crefname{exercise}{exercise}{exercises}
\crefname{fact}{fact}{facts}
\crefname{highlight}{highlight}{highlights}
\crefname{important}{important}{important points}
\crefname{keypoint}{keypoint}{keypoints}
\crefname{lemma}{lemma}{lemmas}
\crefname{note}{note}{notes}
\crefname{part}{part}{parts}
\crefname{problem}{problem}{problems}
\crefname{property}{property}{properties}
\crefname{proposition}{proposition}{propositions}
\crefname{question}{question}{questions}
\crefname{remark}{remark}{remarks}
\crefname{section}{section}{sections}
\crefname{solution}{solution}{solutions}
\crefname{subsection}{subsection}{subsections}
\crefname{subsubsection}{subsubsection}{subsubsections}
\crefname{theorem}{theorem}{theorems}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Bibliography Management with BibLaTeX
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Conditionally load and configure BibLaTeX if the biblatex option is specified
\ifbiblatex
    \RequirePackage[%
    	hyperref=auto,          % Automatically configure compatibility with hyperref
    	defernumbers=true,      % Defer citation numbering until after sorting
    	style=alphabetic,       % Use alphabetic style for references
    	backref=true,           % Enable back-references from bibliography to citations
    	sorting=anyt,           % Sort entries by order of appearance
    	autocite=superscript,   % Use superscript for in-text citations
    	maxalphanames=99,       % Limit alphabetic labels to 99 names
    	maxnames=999,           % Display up to 999 names in citations
    	backend=biber           % Use Biber for bibliography processing
    ]{biblatex} % Load BibLaTeX with the specified options
                
    % Define a command to add .bib files to the bibliography resources
    % Usage: \referencedata{filename.bib}
    \providecommand{\referencedata}[1]{%
    	\addbibresource{#1} % Add the specified .bib file
    }
                
    % Set font size for bibliography entries
    \renewcommand*{\bibfont}{\small} % Use small font size for entries
                
    % Customize back-reference strings in the bibliography
    \DefineBibliographyStrings{english}{%
    	backrefpage={\unskip Cited on page},%
    	backrefpages={\unskip Cited on pages}%
    }
\else
    % Use a default bibliography style if BibLaTeX is not loaded
    \bibliographystyle{amsalpha}
\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Environment for Problems and Exercises
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Define a new environment called 'problems' with an optional title argument (default: 'Problem Set')
\newenvironment{problems}[1][Problem Set]{
	% Set the section heading to the provided title
	\vfill\pagebreak\section{#1} % Make the title bold
	\small % Set font size to small for the content
	% Configure enumeration style:
	% For the first level, set labels as (Problem ChapterNumber.ItemNumber)
	\setlist[enumerate, 1]{label={${\color{accentcolor}\scriptstyle\vartriangleright\hspace{1pt}\displaystyle\thechapter.\arabic*}$}, left=0pt, labelsep=1em, itemsep=0.5em}
	% For the second level, set labels as (a), (b), etc.
	\setlist[enumerate, 2]{label=(\arabic*), left=1em, labelsep=1em, itemsep=0.5em}
	% Begin an enumerated list for the problems
	\begin{enumerate}
		}{
		% End the enumerated list
	\end{enumerate}
	% Adjust the layout or formatting as needed at the end
}

% Define a new enumeration list style called 'caseList' with a single level
\newlist{caseList}{enumerate}{1}
% Configure 'caseList' labels: bold text 'Case n:' where n is the item number, with no left margin
\setlist[caseList]{label=\textsc{Case~\arabic*:},leftmargin=*}

% Define a new environment called 'case' with an optional argument (default: empty)
\NewDocumentEnvironment{case}{O{}}{%
	% Start the 'caseList' enumeration with the optional title
	\begin{caseList}[#1]%
		}{%
		% End the 'caseList' enumeration
	\end{caseList}%
}

% Define a new enumeration list style called 'axiomList' with a single level
\newlist{axiomList}{enumerate}{1}
% Configure 'axiomList' labels: bold text 'Axiom A:' where A is the letter index, with no left margin
\setlist[axiomList]{label=\textbf{Axiom~\arabic*.}, leftmargin=*}

% Define a new environment called 'axiom' with an optional argument (default: empty)
\NewDocumentEnvironment{axiom}{O{}}{%
	% Start the 'axiomList' enumeration with the optional title
	\begin{axiomList}[#1]%
		}{%
		% End the 'axiomList' enumeration
	\end{axiomList}%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Custom Commands for Document Formatting
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\providecommand*{\code}[1]{{\ttfamily#1}} % Formats text in a monospaced font to represent code
\providecommand{\cat}[1]{\ensuremath{\mathsf{#1}}} % Displays category names in math mode using a sans-serif font
\providecommand{\missingcitation}{\code{\small\color{Firebrick1}<Citation Missing>}} % Formats missing citations in small red text
\providecommand{\missing}[1]{{\color{Firebrick1}#1}} % Highlights text in red to indicate missing or problematic content
\providecommand{\strike}{\bgroup\ULdepth=-.55ex\ULset} % Applies a strike-through effect for deleted or emphasized text
\providecommand{\term}[1]{#1\index{#1}} % Defines and indexes terms for glossary inclusion
\providecommand{\textem}[1]{{\bfseries\color{accentcolor}#1}} % Formats emphasized text with bold font in a specified accent colour
\providecommand{\toc}{%
	\tableofcontents % Generates the table of contents
	\addcontentsline{toc}{chapter}{Contents} % Adds a "Contents" entry to the table of contents
	\vfill % Fills vertical space to push content to the next page
	\pagebreak % Forces a page break after the table of contents
}
\providecommand{\urlref}[1]{\href{#1}{#1}} % Creates a hyperlink for a given URL

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% TODO Notes and Annotations
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Enable TODO notes functionality within the document
\RequirePackage{todonotes} % Enable adding TODO notes

% Insert inline TODO notes with a red border and background for annotation purposes
\providecommand{\mynote}[1]{%
	\smallskip
	\todo[inline, size=\small, bordercolor=Firebrick1!20, color=Firebrick1!20]{\sffamily#1}
	\smallskip
} % Create inline TODO notes with red border and background

% Mark sections requiring a citation with a TODO note
\providecommand{\needcite}{%
	\todo[noline, size=\small, bordercolor=Firebrick1!20, color=Firebrick1!20]{\sffamily~Requires citation.}
} % Mark locations where a citation is required

% Disable the use of '@' in command names
\makeatother

% End of package
\endinput