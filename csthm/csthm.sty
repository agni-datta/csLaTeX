%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% csthm.sty — Theorem Environment Suite for Computer Science
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Author: Agni Datta <agnidatta.org@gmail.com>
% Version: 2.2
% Date: 2025/06/10
% License: LaTeX Project Public License v1.3c
%
% ABSTRACT:
%   The csthm package is an advanced and extensible LaTeX package designed to provide
%   a rigorous, feature-rich, and visually distinct suite of theorem-like environments
%   for academic documents in computer science and related disciplines. It aims to
%   standardize the presentation of formal statements, definitions, remarks, and
%   pedagogical highlights, while supporting modern typesetting practices and
%   intelligent cross-referencing.
%
% OVERVIEW OF FEATURES:
%   • Multiple Theorem Styles:
%       - 'fancy': Modern, colored, and framed environments utilizing mdframed and TikZ.
%       - 'normal': Sans-serif environments with accent symbols for clarity.
%       - 'oldschool': Classic bold/scshape environments for traditional documents.
%     The style is selected via package options; only one style may be active at a time.
%
%   • Extensive Environment Coverage:
%       - Theorem-like: theorem, assertion, assumption, axiom, claim, conclusion,
%         conjecture, corollary, fact, folklore, hypothesis, lemma, postulate,
%         property, proposition.
%       - Definition-like: application, construction, convention, definition,
%         experiment, notation, openproblem, problem, protocol, result.
%       - Remark-like: commentary, contribution, example, exercise, motivation,
%         notationabuse, note, observation, question, remark.
%       - Highlight-like: guideline, highlight, important, insight, keypoint,
%         recall, summary, takeaway, tip, warning.
%       - Other: proof (redefined for style consistency), case (for structured
%         case analysis).
%     Each environment is available in both numbered and unnumbered (starred) forms.
%
%   • Intelligent Cross-Referencing:
%       - Seamless integration with cleveref and hyperref for automatic, context-aware
%         cross-references, including correct singular and plural forms for all
%         environments.
%       - Automatic loading of cleveref if hyperref is detected; issues a warning
%         and attempts fallback if hyperref is not loaded before csthm.
%
%   • Customization:
%       - Accent color and font settings are user-configurable via \setaccentcolor.
%       - Consistent symbol and font usage across all environments.
%       - Modern framed environments (in 'fancy' style) with customizable spacing.
%
%   • Robust Internal Architecture:
%       - All environments are defined via \declaretheorem from thmtools for
%         maximum flexibility and compatibility.
%       - Styles are modularly set up via \declaretheoremstyle.
%       - Boolean flags control style activation, ensuring mutual exclusivity.
%       - Comprehensive warnings for unrecognized options and improper usage.
%
% USAGE INSTRUCTIONS:
%   1. Loading the Package:
%        \usepackage[<style>]{csthm}
%      where <style> is one of: fancy, normal, oldschool.
%      If no style is specified, no environments are defined and a message is issued.
%
%   2. Example Usage:
%        \usepackage[fancy]{csthm}
%
%   3. Changing the Accent Color:
%        \setaccentcolor{<color>}
%      where <color> is any color recognized by the xcolor package.
%
%   4. Using the 'case' Environment:
%        \begin{case}
%          \item ...
%          \item ...
%        \end{case}
%
%   5. Cross-Referencing:
%      Use \cref and \Cref (from cleveref) for intelligent references to all
%      theorem-like environments. Singular and plural forms are handled automatically.
%
%   6. Numbered and Unnumbered Environments:
%      All environments support starred (unnumbered) forms, e.g., \begin{theorem*}...\end{theorem*}.
%
% DEPENDENCIES:
%   - amsmath, amssymb, amsthm: For mathematical typesetting and theorem support.
%   - sansmath: For sans-serif math fonts (used in 'fancy' and 'normal' styles).
%   - enumitem: For customizable list environments (used in 'case' and others).
%   - thmtools: For advanced theorem customization and environment definition.
%   - mdframed: For framed boxes (required for 'fancy' style; uses TikZ).
%   - xcolor: For extended color support (X11, SVG, dvipsnames).
%   - cleveref (optional, auto-loaded if hyperref is present): For smart cross-referencing.
%   - hyperref (optional, but recommended for best cross-referencing experience).
%   - comment (optional, recommended for advanced document management).
%
% OPTIONS:
%   - fancy: Activates modern, colored, framed theorem environments.
%   - normal: Activates standard sans-serif theorem environments with symbols.
%   - oldschool: Activates classic bold/scshape theorem environments.
%
% CAVEATS AND WARNINGS:
%   • Only one style option may be active at a time. If multiple styles are specified,
%     the last one processed will take precedence.
%   • If no style is selected, the package will not define any environments and will
%     output a message to the log.
%   • For optimal cross-referencing, load hyperref before csthm. If hyperref is not
%     loaded, cleveref will be loaded with a warning, and some cross-referencing
%     features may be degraded.
%   • The proof environment is redefined for consistency with the selected style.
%   • The package is intended for use in computer science and related technical
%     documents; some environments or styles may not be suitable for other disciplines.
%   • The 'fancy' style requires mdframed and TikZ; compilation will fail if these
%     are not available.
%   • The accent color must be a valid color recognized by xcolor; invalid color
%     names will result in errors.
%   • The package issues warnings for unrecognized options and improper usage.
%
% LIMITATIONS:
%   • The package does not support simultaneous activation of multiple styles.
%   • Customization of environment names or numbering schemes beyond what is provided
%     requires manual intervention or further package extension.
%   • Some advanced cleveref features (e.g., custom reference formats) may require
%     additional configuration by the user.
%   • The package assumes a modern LaTeX distribution with all dependencies available.
%
% FURTHER READING AND CUSTOMIZATION:
%   • For advanced customization, consult the documentation for thmtools, amsthm,
%     mdframed, cleveref, and xcolor.
%   • Users may redefine fonts, colors, or symbols by patching the relevant commands
%     after loading csthm.
%
% ACKNOWLEDGEMENTS:
%   The design and implementation of csthm draw inspiration from the best practices
%   in mathematical typesetting and the needs of the computer science academic
%   community. Feedback and contributions are welcome.
%
% CHANGELOG:
%   v2.2 (2025/06/10):
%     - Documentation updated to mention the 'comment' package as a recommended dependency for advanced document management.
%     - Version and date updated.
%     - No functional changes to environments or core logic.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% End of documentation for csthm.sty
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\NeedsTeXFormat{LaTeX2e}[1999/12/01]
\ProvidesPackage{csthm}[2025/06/10 v2.2 Theorem Environments for Computer Science]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Option Definitions
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newif\iffancy 		\fancyfalse        	% Enable fancy theorem formatting
\newif\ifnormal 	\normalfalse      	% Enable standard theorem formatting
\newif\ifoldschool 	\oldschoolfalse 	% Enable oldschool theorem formatting

% Option Definitions
\DeclareOption{fancy}{\fancytrue}
\DeclareOption{normal}{\normaltrue}
\DeclareOption{oldschool}{\oldschooltrue}

% Handle Unrecognized Options
\DeclareOption*{\PackageWarning{csthm}{Unrecognized option '\CurrentOption'}}

% Process Options
\ProcessOptions\relax

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Package Definitions
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Core LaTeX packages
\@ifpackageloaded{amsthm}{}{\RequirePackage{amsthm}}            % Theorem environments
\@ifpackageloaded{etoolbox}{}{\RequirePackage{etoolbox}}        % Boolean operations
\@ifpackageloaded{xsparse}{}{\RequirePackage{xsparse}}          % Advanced argument parsing

% Font and formatting packages
\@ifpackageloaded{amsmath}{}{\RequirePackage{amsmath}}          % Advanced math typesetting
\@ifpackageloaded{amssymb}{}{\RequirePackage{amssymb}}          % Additional symbols
\@ifpackageloaded{enumitem}{}{\RequirePackage{enumitem}}        % Customizable list formatting
\@ifpackageloaded{sansmath}{}{\RequirePackage{sansmath}}        % Sans-serif math font

% Theorem and styling packages
\@ifpackageloaded{thmtools}{}{\RequirePackage{thmtools}}        % Theorem customization tools
\@ifpackageloaded{mdframed}{%
	\PassOptionsToPackage{%
		skipabove=10pt,
		skipbelow=10pt,
		ntheorem,
		framemethod=Tikz
	}{mdframed}%
}{%
	\RequirePackage[%
		skipabove=10pt,            % Space above frames
		skipbelow=10pt,            % Space below frames
		ntheorem,                  % Integration with theorem environments
		framemethod=Tikz           % TikZ frame styling
	]{mdframed}%
}

% Color package
\RequirePackage[x11names,dvipsnames,svgnames]{xcolor}           % Colors

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Color and Font Definitions for the csthm package
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Accent Color Settings
\providecommand{\accentcolor}{black}%
\providecommand{\setaccentcolor}[1]{\renewcommand{\accentcolor}{#1}}%

% Common Font and Symbol
\newcommand{\commonthmfont}{\sffamily}%
\newcommand{\commonthmsymb}{\ensuremath{\color{\accentcolor}\lrcorner}}%

% Heading Fonts
\newcommand{\thmheadfont}{\sffamily}%
\newcommand{\defnheadfont}{\sffamily}%
\newcommand{\remarkheadfont}{\sffamily}%
\newcommand{\hltheadfont}{\sffamily}%

% Body Fonts
\newcommand{\thmfont}{\normalfont}%
\newcommand{\defnfont}{\normalfont}%
\newcommand{\remarkfont}{\normalfont}%
\newcommand{\hltfont}{\normalfont\sffamily}%

% Environment Symbols
\newcommand{\thmsymb}{\ensuremath{\color{\accentcolor}\scriptstyle\blacktriangleright}}%
\newcommand{\defnsymb}{\ensuremath{\color{\accentcolor}\scriptstyle\blacksquare}}%
\newcommand{\remarksymb}{\ensuremath{\color{\accentcolor}\scriptstyle\vartriangleright}}%
\newcommand{\hltsymb}{\ensuremath{\color{\accentcolor}\scriptstyle\square}}%

% QED Symbol
\renewcommand{\qedsymbol}{\ensuremath{\scriptstyle\color{\accentcolor}\square}}%

% Package Reference
\newcommand{\csthmpkg}{\textsf{csthm}}%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Case List and Environment Definitions
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Case List Definition
\newlist{caseList}{enumerate}{1}% Define a new list type 'caseList'
\setlist[caseList]{label=\textbf{Case~\arabic*:}, leftmargin=*}% Customize 'caseList' labels

\NewDocumentEnvironment{case}{O{}}{% Begin 'case' environment with optional argument
	\begin{caseList}[#1]%
		}{%
	\end{caseList}% End 'case' environment
}

% Definition of New Environments (Numbered and Unnumbered)
\newcommand{\basicenv}{%
	% Theorem-like Environments
	\declaretheorem[style=thmstyle,name=Theorem]{theorem}%
	\declaretheorem[style=thmstyle,name=Assertion]{assertion}%
	\declaretheorem[style=thmstyle,name=Assumption]{assumption}%
	\declaretheorem[style=thmstyle,name=Axiom]{axiom}%
	\declaretheorem[style=thmstyle,name=Claim]{claim}%
	\declaretheorem[style=thmstyle,name=Conclusion]{conclusion}%
	\declaretheorem[style=thmstyle,name=Conjecture]{conjecture}%
	\declaretheorem[style=thmstyle,name=Corollary]{corollary}%
	\declaretheorem[style=thmstyle,name=Fact]{fact}%
	\declaretheorem[style=thmstyle,name=Folklore]{folklore}%
	\declaretheorem[style=thmstyle,name=Hypothesis]{hypothesis}%
	\declaretheorem[style=thmstyle,name=Lemma]{lemma}%
	\declaretheorem[style=thmstyle,name=Postulate]{postulate}%
	\declaretheorem[style=thmstyle,name=Property]{property}%
	\declaretheorem[style=thmstyle,name=Proposition]{proposition}%

	% Unnumbered Theorem-like Environments
	\declaretheorem[style=thmstyle,unnumbered,name=Theorem]{theorem*}%
	\declaretheorem[style=thmstyle,unnumbered,name=Assertion]{assertion*}%
	\declaretheorem[style=thmstyle,unnumbered,name=Assumption]{assumption*}%
	\declaretheorem[style=thmstyle,unnumbered,name=Axiom]{axiom*}%
	\declaretheorem[style=thmstyle,unnumbered,name=Claim]{claim*}%
	\declaretheorem[style=thmstyle,unnumbered,name=Conclusion]{conclusion*}%
	\declaretheorem[style=thmstyle,unnumbered,name=Conjecture]{conjecture*}%
	\declaretheorem[style=thmstyle,unnumbered,name=Corollary]{corollary*}%
	\declaretheorem[style=thmstyle,unnumbered,name=Fact]{fact*}%
	\declaretheorem[style=thmstyle,unnumbered,name=Folklore]{folklore*}%
	\declaretheorem[style=thmstyle,unnumbered,name=Hypothesis]{hypothesis*}%
	\declaretheorem[style=thmstyle,unnumbered,name=Lemma]{lemma*}%
	\declaretheorem[style=thmstyle,unnumbered,name=Postulate]{postulate*}%
	\declaretheorem[style=thmstyle,unnumbered,name=Property]{property*}%
	\declaretheorem[style=thmstyle,unnumbered,name=Proposition]{proposition*}%

	% Definition-like Environments
	\declaretheorem[style=defstyle,name=Application]{application}%
	\declaretheorem[style=defstyle,name=Construction]{construction}%
	\declaretheorem[style=defstyle,name=Convention]{convention}%
	\declaretheorem[style=defstyle,name=Definition]{definition}%
	\declaretheorem[style=defstyle,name=Experiment]{experiment}%
	\declaretheorem[style=defstyle,name=Notation]{notation}%
	\declaretheorem[style=defstyle,name=Open Problem]{openproblem}%
	\declaretheorem[style=defstyle,name=Problem]{problem}%
	\declaretheorem[style=defstyle,name=Protocol]{protocol}%
	\declaretheorem[style=defstyle,name=Result]{result}%

	% Unnumbered Definition-like Environments
	\declaretheorem[style=defstyle,unnumbered,name=Application]{application*}%
	\declaretheorem[style=defstyle,unnumbered,name=Construction]{construction*}%
	\declaretheorem[style=defstyle,unnumbered,name=Convention]{convention*}%
	\declaretheorem[style=defstyle,unnumbered,name=Definition]{definition*}%
	\declaretheorem[style=defstyle,unnumbered,name=Experiment]{experiment*}%
	\declaretheorem[style=defstyle,unnumbered,name=Notation]{notation*}%
	\declaretheorem[style=defstyle,unnumbered,name=Open Problem]{openproblem*}%
	\declaretheorem[style=defstyle,unnumbered,name=Problem]{problem*}%
	\declaretheorem[style=defstyle,unnumbered,name=Protocol]{protocol*}%
	\declaretheorem[style=defstyle,unnumbered,name=Result]{result*}%

	% Remark-like Environments
	\declaretheorem[style=remarkstyle,name=Commentary]{commentary}%
	\declaretheorem[style=remarkstyle,name=Contribution]{contribution}%
	\declaretheorem[style=remarkstyle,name=Example]{example}%
	\declaretheorem[style=remarkstyle,name=Exercise]{exercise}%
	\declaretheorem[style=remarkstyle,name=Motivation]{motivation}%
	\declaretheorem[style=remarkstyle,name=Notation Abuse]{notationabuse}%
	\declaretheorem[style=remarkstyle,name=Note]{note}%
	\declaretheorem[style=remarkstyle,name=Observation]{observation}%
	\declaretheorem[style=remarkstyle,name=Question]{question}%
	\declaretheorem[style=remarkstyle,name=Remark]{remark}%

	% Unnumbered Remark-like Environments
	\declaretheorem[style=remarkstyle,unnumbered,name=Commentary]{commentary*}%
	\declaretheorem[style=remarkstyle,unnumbered,name=Contribution]{contribution*}%
	\declaretheorem[style=remarkstyle,unnumbered,name=Example]{example*}%
	\declaretheorem[style=remarkstyle,unnumbered,name=Exercise]{exercise*}%
	\declaretheorem[style=remarkstyle,unnumbered,name=Motivation]{motivation*}%
	\declaretheorem[style=remarkstyle,unnumbered,name=Notation Abuse]{notationabuse*}%
	\declaretheorem[style=remarkstyle,unnumbered,name=Note]{note*}%
	\declaretheorem[style=remarkstyle,unnumbered,name=Observation]{observation*}%
	\declaretheorem[style=remarkstyle,unnumbered,name=Question]{question*}%
	\declaretheorem[style=remarkstyle,unnumbered,name=Remark]{remark*}%

	% Highlight-like Environments
	\declaretheorem[style=hltstyle,name=Guideline]{guideline}%
	\declaretheorem[style=hltstyle,name=Highlight]{highlight}%
	\declaretheorem[style=hltstyle,name=Important]{important}%
	\declaretheorem[style=hltstyle,name=Insight]{insight}%
	\declaretheorem[style=hltstyle,name=Key Point]{keypoint}%
	\declaretheorem[style=hltstyle,name=Recall]{recall}%
	\declaretheorem[style=hltstyle,name=Summary]{summary}%
	\declaretheorem[style=hltstyle,name=Takeaway]{takeaway}%
	\declaretheorem[style=hltstyle,name=Tip]{tip}%
	\declaretheorem[style=hltstyle,name=Warning]{warning}%

	% Unnumbered Highlight-like Environments
	\declaretheorem[style=hltstyle,unnumbered,name=Guideline]{guideline*}%
	\declaretheorem[style=hltstyle,unnumbered,name=Highlight]{highlight*}%
	\declaretheorem[style=hltstyle,unnumbered,name=Important]{important*}%
	\declaretheorem[style=hltstyle,unnumbered,name=Insight]{insight*}%
	\declaretheorem[style=hltstyle,unnumbered,name=Key Point]{keypoint*}%
	\declaretheorem[style=hltstyle,unnumbered,name=Recall]{recall*}%
	\declaretheorem[style=hltstyle,unnumbered,name=Summary]{summary*}%
	\declaretheorem[style=hltstyle,unnumbered,name=Takeaway]{takeaway*}%
	\declaretheorem[style=hltstyle,unnumbered,name=Tip]{tip*}%
	\declaretheorem[style=hltstyle,unnumbered,name=Warning]{warning*}%

	% Proof Environment
	\let\proof\relax%
	\let\endproof\relax%
	\declaretheorem[style=proofstyle]{proof}%
}%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Fancy Theorem Environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\fancythm}{%
	% Common settings
	\renewcommand{\commonthmfont}{\normalfont}%
	\renewcommand{\commonthmsymb}{\ensuremath{\color{\accentcolor}\lrcorner}}%
	\renewcommand{\qedsymbol}{\ensuremath{\color{\accentcolor}\square}}%
	% Heading fonts
	\renewcommand{\thmheadfont}{\sffamily}%
	\renewcommand{\defnheadfont}{\sffamily}%
	\renewcommand{\remarkheadfont}{\sffamily}%
	\renewcommand{\hltheadfont}{\sffamily}%
	% Body fonts
	\renewcommand{\thmfont}{\normalfont}%
	\renewcommand{\defnfont}{\normalfont}%
	\renewcommand{\remarkfont}{\normalfont}%
	\renewcommand{\hltfont}{\normalfont\sffamily\sansmath}%
	% (Empty) symbol definitions
	\renewcommand{\thmsymb}{}%
	\renewcommand{\defnsymb}{}%
	\renewcommand{\remarksymb}{}%
	\renewcommand{\hltsymb}{}%
	% Color definitions
	\newcommand{\thmcolor}{SeaGreen4}%
	\newcommand{\defncolor}{RoyalBlue2}%
	\newcommand{\remarkcolor}{Aquamarine4}%
	\newcommand{\hltcolor}{DeepPink4}%
	% Theorem style (with mdframed)
	\declaretheoremstyle[
		spaceabove=0pt,
		spacebelow=0pt,
		headfont=\thmheadfont\color{\thmcolor},
		notefont=\thmheadfont\color{\thmcolor},
		bodyfont=\thmfont,
		postheadspace=5pt,
		numberwithin=section,
		mdframed={
				linewidth=2pt,
				rightline=false,
				topline=false,
				bottomline=false,
				linecolor=\thmcolor,
				backgroundcolor=\thmcolor!5
			},
		headpunct={.}
	]{thmstyle}
	% Definition style
	\declaretheoremstyle[
		spaceabove=0pt,
		spacebelow=0pt,
		headfont=\defnheadfont\color{\defncolor},
		notefont=\defnheadfont\color{\defncolor},
		bodyfont=\defnfont,
		postheadspace=5pt,
		numberwithin=section,
		mdframed={
				linewidth=2pt,
				rightline=false,
				topline=false,
				bottomline=false,
				linecolor=\defncolor,
				backgroundcolor=\defncolor!5
			},
		headpunct={.}
	]{defstyle}
	% Remark style
	\declaretheoremstyle[
		spaceabove=0pt,
		spacebelow=0pt,
		headfont=\remarkheadfont\color{\remarkcolor},
		notefont=\remarkheadfont\color{\remarkcolor},
		bodyfont=\remarkfont,
		postheadspace=5pt,
		numberwithin=section,
		mdframed={
				linewidth=2pt,
				rightline=false,
				topline=false,
				bottomline=false,
				linecolor=\remarkcolor,
				backgroundcolor=\remarkcolor!5
			},
		headpunct={.}
	]{remarkstyle}
	% Highlight style
	\declaretheoremstyle[
		spaceabove=0pt,
		spacebelow=0pt,
		headfont=\hltheadfont\color{\hltcolor},
		notefont=\hltheadfont\color{\hltcolor},
		bodyfont=\hltfont,
		postheadspace=5pt,
		numberwithin=section,
		mdframed={
				linewidth=2pt,
				rightline=false,
				topline=false,
				bottomline=false,
				linecolor=\hltcolor,
				backgroundcolor=\hltcolor!5
			},
		headpunct={.}
	]{hltstyle}
	% Proof style
	\declaretheoremstyle[
		headfont=\scshape\color{\thmcolor},
		notefont=\scshape\color{\thmcolor},
		bodyfont=\normalfont,
		postheadspace=5pt,
		numbered=no,
		headpunct={.},
		qed=\qedsymbol
	]{proofstyle}
	\basicenv%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Standard (Normal) Theorem Environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand*{\normalthm}{%
	% Common settings
	\renewcommand{\commonthmfont}{\sffamily}%
	\renewcommand{\commonthmsymb}{\ensuremath{\color{\accentcolor}\lrcorner}}%
	\renewcommand{\qedsymbol}{\ensuremath{\color{\accentcolor}\square}}%
	% Heading fonts
	\renewcommand{\thmheadfont}{\sffamily}%
	\renewcommand{\defnheadfont}{\sffamily}%
	\renewcommand{\remarkheadfont}{\sffamily}%
	\renewcommand{\hltheadfont}{\sffamily}%
	% Body fonts
	\renewcommand{\thmfont}{\normalfont}%
	\renewcommand{\defnfont}{\normalfont}%
	\renewcommand{\remarkfont}{\normalfont}%
	\renewcommand{\hltfont}{\normalfont\sffamily}%
	% Symbol definitions
	\renewcommand{\thmsymb}{\ensuremath{\color{\accentcolor}\scriptstyle\blacktriangleright}}%
	\renewcommand{\defnsymb}{\ensuremath{\color{\accentcolor}\scriptstyle\blacksquare}}%
	\renewcommand{\remarksymb}{\ensuremath{\color{\accentcolor}\scriptstyle\vartriangleright}}%
	\renewcommand{\hltsymb}{\ensuremath{\color{\accentcolor}\scriptstyle\square}}%
	% Theorem style
	\declaretheoremstyle[
		spaceabove=\topsep,
		spacebelow=\topsep,
		headfont=\thmheadfont\thmsymb~,
		notefont=\thmheadfont,
		bodyfont=\thmfont,
		postheadspace=5pt,
		numberwithin=section,
		qed=\commonthmsymb,
		headpunct={.}
	]{thmstyle}
	% Definition style
	\declaretheoremstyle[
		spaceabove=\topsep,
		spacebelow=\topsep,
		headfont=\defnheadfont\defnsymb~,
		notefont=\defnheadfont,
		bodyfont=\defnfont,
		postheadspace=5pt,
		numberwithin=section,
		qed=\commonthmsymb,
		headpunct={.}
	]{defstyle}
	% Remark style
	\declaretheoremstyle[
		spaceabove=\topsep,
		spacebelow=\topsep,
		headfont=\remarkheadfont\remarksymb~,
		notefont=\remarkheadfont,
		bodyfont=\remarkfont,
		postheadspace=5pt,
		numberwithin=section,
		qed=\commonthmsymb,
		headpunct={.}
	]{remarkstyle}
	% Highlight style
	\declaretheoremstyle[
		spaceabove=\topsep,
		spacebelow=\topsep,
		headfont=\hltheadfont\hltsymb~,
		notefont=\hltheadfont,
		bodyfont=\hltfont,
		postheadspace=5pt,
		numberwithin=section,
		qed=\commonthmsymb,
		headpunct={.}
	]{hltstyle}
	% Proof style
	\declaretheoremstyle[
		headfont=\scshape,
		notefont=\commonthmfont,
		bodyfont=\normalfont,
		postheadspace=5pt,
		numbered=no,
		headpunct={.},
		qed=\qedsymbol
	]{proofstyle}
	\basicenv%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Old-School Theorem Environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand*{\oldschoolthm}{%
	% Common settings
	\renewcommand{\commonthmfont}{\normalfont}%
	\renewcommand{\commonthmsymb}{}%
	\renewcommand{\qedsymbol}{\ensuremath{\color{\accentcolor}\square}}%
	% Heading fonts (old-school)
	\renewcommand{\thmheadfont}{\bfseries}%
	\renewcommand{\defnheadfont}{\bfseries}%
	\renewcommand{\remarkheadfont}{\scshape}%
	\renewcommand{\hltheadfont}{\sffamily}%
	% Body fonts
	\renewcommand{\thmfont}{\normalfont}%
	\renewcommand{\defnfont}{\normalfont}%
	\renewcommand{\remarkfont}{\normalfont}%
	\renewcommand{\hltfont}{\normalfont\sffamily}%
	% (Empty) symbol definitions
	\renewcommand{\thmsymb}{}%
	\renewcommand{\defnsymb}{}%
	\renewcommand{\remarksymb}{}%
	\renewcommand{\hltsymb}{}%
	% Theorem style
	\declaretheoremstyle[
		spaceabove=\topsep,
		spacebelow=\topsep,
		headfont=\thmheadfont\thmsymb,
		notefont=\thmheadfont,
		bodyfont=\thmfont,
		postheadspace=5pt,
		numberwithin=section,
		qed=\commonthmsymb,
		headpunct={.}
	]{thmstyle}
	% Definition style
	\declaretheoremstyle[
		spaceabove=\topsep,
		spacebelow=\topsep,
		headfont=\defnheadfont\defnsymb,
		notefont=\defnheadfont,
		bodyfont=\defnfont,
		postheadspace=5pt,
		numberwithin=section,
		qed=\commonthmsymb,
		headpunct={.}
	]{defstyle}
	% Remark style
	\declaretheoremstyle[
		spaceabove=\topsep,
		spacebelow=\topsep,
		headfont=\remarkheadfont\remarksymb,
		notefont=\remarkheadfont,
		bodyfont=\remarkfont,
		postheadspace=5pt,
		numberwithin=section,
		qed=\commonthmsymb,
		headpunct={.}
	]{remarkstyle}
	% Highlight style
	\declaretheoremstyle[
		spaceabove=\topsep,
		spacebelow=\topsep,
		headfont=\hltheadfont\hltsymb,
		notefont=\hltheadfont,
		bodyfont=\hltfont,
		postheadspace=5pt,
		numberwithin=section,
		qed=\commonthmsymb,
		headpunct={.}
	]{hltstyle}
	% Proof style
	\declaretheoremstyle[
		headfont=\scshape,
		notefont=\scshape,
		bodyfont=\normalfont,
		postheadspace=5pt,
		numbered=no,
		headpunct={.},
		qed=\qedsymbol
	]{proofstyle}
	\basicenv%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Cleveref Setup for Intelligent Cross-Referencing
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\AtBeginDocument{%
	\@ifpackageloaded{hyperref}{%
		\RequirePackage[capitalize,nameinlink,noabbrev]{cleveref}%
		% Cleveref Name Declarations for All Environments
		% Theorem-like
		\Crefname{assertion}{Assertion}{Assertions}
		\crefname{assertion}{assertion}{assertions}
		\Crefname{assumption}{Assumption}{Assumptions}
		\crefname{assumption}{assumption}{assumptions}
		\Crefname{axiom}{Axiom}{Axioms}
		\crefname{axiom}{axiom}{axioms}
		\Crefname{claim}{Claim}{Claims}
		\crefname{claim}{claim}{claims}
		\Crefname{conclusion}{Conclusion}{Conclusions}
		\crefname{conclusion}{conclusion}{conclusions}
		\Crefname{conjecture}{Conjecture}{Conjectures}
		\crefname{conjecture}{conjecture}{conjectures}
		\Crefname{corollary}{Corollary}{Corollaries}
		\crefname{corollary}{corollary}{corollaries}
		\Crefname{fact}{Fact}{Facts}
		\crefname{fact}{fact}{facts}
		\Crefname{folklore}{Folklore}{Folklores}
		\crefname{folklore}{folklore}{folklores}
		\Crefname{hypothesis}{Hypothesis}{Hypotheses}
		\crefname{hypothesis}{hypothesis}{hypotheses}
		\Crefname{lemma}{Lemma}{Lemmas}
		\crefname{lemma}{lemma}{lemmas}
		\Crefname{postulate}{Postulate}{Postulates}
		\crefname{postulate}{postulate}{postulates}
		\Crefname{property}{Property}{Properties}
		\crefname{property}{property}{properties}
		\Crefname{proposition}{Proposition}{Propositions}
		\crefname{proposition}{proposition}{propositions}
		\Crefname{theorem}{Theorem}{Theorems}
		\crefname{theorem}{theorem}{theorems}
		% Definition-like
		\Crefname{application}{Application}{Applications}
		\crefname{application}{application}{applications}
		\Crefname{construction}{Construction}{Constructions}
		\crefname{construction}{construction}{constructions}
		\Crefname{convention}{Convention}{Conventions}
		\crefname{convention}{convention}{conventions}
		\Crefname{definition}{Definition}{Definitions}
		\crefname{definition}{definition}{definitions}
		\Crefname{experiment}{Experiment}{Experiments}
		\crefname{experiment}{experiment}{experiments}
		\Crefname{notation}{Notation}{Notations}
		\crefname{notation}{notation}{notations}
		\Crefname{openproblem}{Open Problem}{Open Problems}
		\crefname{openproblem}{open problem}{open problems}
		\Crefname{problem}{Problem}{Problems}
		\crefname{problem}{problem}{problems}
		\Crefname{protocol}{Protocol}{Protocols}
		\crefname{protocol}{protocol}{protocols}
		\Crefname{result}{Result}{Results}
		\crefname{result}{result}{results}
		% Remark-like
		\Crefname{commentary}{Commentary}{Commentaries}
		\crefname{commentary}{commentary}{commentaries}
		\Crefname{contribution}{Contribution}{Contributions}
		\crefname{contribution}{contribution}{contributions}
		\Crefname{example}{Example}{Examples}
		\crefname{example}{example}{examples}
		\Crefname{exercise}{Exercise}{Exercises}
		\crefname{exercise}{exercise}{exercises}
		\Crefname{motivation}{Motivation}{Motivations}
		\crefname{motivation}{motivation}{motivations}
		\Crefname{notationabuse}{Notation Abuse}{Notation Abuses}
		\crefname{notationabuse}{notation abuse}{notation abuses}
		\Crefname{note}{Note}{Notes}
		\crefname{note}{note}{notes}
		\Crefname{observation}{Observation}{Observations}
		\crefname{observation}{observation}{observations}
		\Crefname{question}{Question}{Questions}
		\crefname{question}{question}{questions}
		\Crefname{remark}{Remark}{Remarks}
		\crefname{remark}{remark}{remarks}
		% Highlight-like
		\Crefname{guideline}{Guideline}{Guidelines}
		\crefname{guideline}{guideline}{guidelines}
		\Crefname{highlight}{Highlight}{Highlights}
		\crefname{highlight}{highlight}{highlights}
		\crefname{important}{important point}{important points}
		\Crefname{important}{Important}{Important Points}
		\Crefname{insight}{Insight}{Insights}
		\crefname{insight}{insight}{insights}
		\Crefname{keypoint}{Key Point}{Key Points}
		\crefname{keypoint}{key point}{key points}
		\Crefname{recall}{Recall}{Recalls}
		\crefname{recall}{recall}{recalls}
		\Crefname{summary}{Summary}{Summaries}
		\crefname{summary}{summary}{summaries}
		\Crefname{takeaway}{Takeaway}{Takeaways}
		\crefname{takeaway}{takeaway}{takeaways}
		\Crefname{tip}{Tip}{Tips}
		\crefname{tip}{tip}{tips}
		\Crefname{warning}{Warning}{Warnings}
		\crefname{warning}{warning}{warnings}
		% Email Link Formatting		
		\newcommand{\emailid}[1]{\href{mailto:#1}{\texttt{#1}}}%
	}{%
		\PackageWarning{csthm}{%
			Look, we're going to try loading 'cleveref' now, but you didn't load 'hyperref' first.
			Seriously, just load 'hyperref' before 'csthm' like any sane person would.
			Otherwise, don't come complaining when your references look weird.
			You're on your own, buddy.
		}%
	}%
}%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Conditional Theorem Style Setup
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\iffancy
	\typeout{Using fancy theorem style.}
	\fancythm
\else
	\ifnormal
		\typeout{Using normal theorem style.}
		\normalthm
	\else
		\ifoldschool
			\typeout{Using oldschool theorem style.}
			\oldschoolthm
		\else
			\typeout{No theorem style selected.}
		\fi
	\fi
\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% End of package
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\endinput
