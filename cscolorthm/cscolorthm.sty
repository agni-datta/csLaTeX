%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% cscolorthm Package
%% Version: 1.0
%% Date: 2024/04/17
%% Description: This package provides a collection of coloured theorem environments and proof environments using tcolorbox.
%% Author: Agni Datta
%% Email: agnidatta.org@gmail.com
%% Maintainer: Agni Datta
%% License: MIT
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% This package offers a comprehensive set of coloured theorem environments and proof environments utilizing the powerful tcolorbox package. It aims to enhance the visual appeal of theorem-like environments while maintaining readability and clarity in academic documents.

% Usage:
%   1. Load the package in the preamble using \usepackage{cscolorthm}.
%   2. After loading, custom theorem environments such as theorem, lemma, corollary, etc., can be defined and used in the document.
%   3. Proof environments are also provided, including standard proof, proof sketch, proof idea, etc.

% Contents:
%   1. \CreateColorTheoremEnvironments: Main function for creating coloured theorem environments.
%   2. \CreateProofEnvironments: Function for creating proof environments.
%   3. Custom coloured theorem environments:
%       - theorem, lemma, corollary, proposition, claim, conjecture
%       - definition, example, remark
%       - fact, note, question
%       - case, exercise, problem, property
%       - solution, important, keypoint, highlight
%   4. Proof environments:
%       - proof, proofSketch, proofIdea, proofOfLemma, proofAttempt, proofOf

% Enable the use of '@' in command names
\makeatletter

% Declare that this is a LaTeX2e package
\def\filename{cscolorthm}
\def\fileversion{v1}
\def\filedate{2024/04/17}
\def\fileauthor{Agni Datta}

\NeedsTeXFormat{LaTeX2e}
\AtEndOfPackage{\ProvidesPackage{\filename}[\filedate\space\fileversion\space(\fileauthor)]}
%\typeout{Package `\filename', \fileversion, <\filedate>} % Commented out to suppress the package loading message
% Modify the \typeout command to suppress the message
\typeout{} % Output an empty line instead of the package loading message
\ProvidesPackage{cscolorthm}[2024/04/17 v1.0 Colored Theorem Environments]

% Check if a package is already loaded
\newcommand{\IfPackageLoaded}[2]{\@ifpackageloaded{#1}{#2}{}}

% Import required packages
\IfPackageLoaded{etoolbox}{}{\RequirePackage{etoolbox}} % For conditional statements
\IfPackageLoaded{tcolorbox}{}{\RequirePackage[most]{tcolorbox}} % Custom lists
\IfPackageLoaded{xcolor}{}{\RequirePackage[x11names, dvipsnames, svgnames]{xcolor}} % Support for color
\IfPackageLoaded{amsthm}{}{\RequirePackage{amsthm}} % AMS theorem package
\IfPackageLoaded{amsmath}{}{\RequirePackage{amsmath}} % AMS math package
\IfPackageLoaded{amssymb}{}{\RequirePackage{amssymb}} % AMS symbols package
\IfPackageLoaded{enumitem}{}{\RequirePackage{enumitem}} % Custom lists
\IfPackageLoaded{footnote}{}{\RequirePackage{footnote}} % For footnotes management
\IfPackageLoaded{hyperref}{}{\RequirePackage{hyperref}} % Hyperlinks
\IfPackageLoaded{cleveref}{}{\RequirePackage{cleveref}} % Clever cross-referencing

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Definition of New Environments with tcolorbox
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Define new environments with tcolorbox using soothing colours
\newcommand{\newcolorboxes}[6]{%
	% Arguments:
	%   #1: Environment name
	%   #2: Display name of the environment
	%   #3: Background color of the box
	%   #4: Color of the title font
	%   #5: Font style for the content
	%   #6: Label prefix for hyperref
	\newtcbtheorem[number within=section]{#1}{#2}{%
		enhanced,
		colback=#3!5,
		colframe=#3!80!black,
		arc=2pt,
		boxrule=0.5pt,
		fonttitle=\color{#4}\sffamily\scshape,
		before upper={\parindent15pt},
		before lower={\parindent15pt},
		fontupper={\color{black}\normalfont #5},
		fontlower={\color{black}\normalfont #5},
		left=10pt,
		right=10pt,
		top=10pt,
		bottom=10pt,
		attach boxed title to top left={yshift=-2mm,xshift=4mm},
		boxed title style={
			colback=#3!20,
			colframe=#3!80!black,
			boxrule=0.5pt
		},
		label={#6:\thetcbcounter} % Hyperref label
		}{#6}%
}

% Define tcolorbox environments for various cases using soothing colours
\newcolorboxes{theorem}{Theorem}{SlateBlue1}{black}{\itshape}{thm}
\newcolorboxes{lemma}{Lemma}{DarkSeaGreen1}{black}{\itshape}{lem}
\newcolorboxes{corollary}{Corollary}{SeaGreen1}{black}{\itshape}{cor}
\newcolorboxes{proposition}{Proposition}{LightBlue1}{black}{\itshape}{prop}
\newcolorboxes{claim}{Claim}{Aquamarine1}{black}{\itshape}{clm}
\newcolorboxes{conjecture}{Conjecture}{PaleTurquoise1}{black}{\itshape}{conj}

\newcolorboxes{definition}{Definition}{RoyalBlue1}{black}{\normalfont}{def}
\newcolorboxes{remark}{Remark}{DeepSkyBlue1}{black}{\normalfont}{rem}
\newcolorboxes{example}{Example}{Chartreuse1}{black}{\normalfont}{ex}

\newcolorboxes{fact}{Fact}{IndianRed1}{black}{\normalfont}{fact}
\newcolorboxes{note}{Note}{Maroon1}{black}{\normalfont}{note}
\newcolorboxes{question}{Question}{Sienna1}{black}{\normalfont}{ques}

\newcolorboxes{case}{Case}{Magenta1}{black}{\normalfont}{case}
\newcolorboxes{exercise}{Exercise}{Chocolate1}{black}{\normalfont}{exer}
\newcolorboxes{problem}{Problem}{MediumPurple1}{black}{\normalfont}{prob}
\newcolorboxes{property}{Property}{SpringGreen1}{black}{\normalfont}{prop}
\newcolorboxes{solution}{Solution}{Gold1}{black}{\normalfont}{sol}
\newcolorboxes{important}{Important}{Pink1}{black}{\normalfont}{imp}
\newcolorboxes{keypoint}{Keypoint}{Tomato1}{black}{\normalfont}{key}
\newcolorboxes{highlight}{Highlight}{Red1}{black}{\normalfont}{high}

% Define proof environments
\renewenvironment{proof}{\noindent\textit{Proof.}\hspace*{0.25em}}{\qed\bigskip}
\newenvironment{proofSketch}{\noindent\textit{Sketch of Proof.}\hspace*{0.25em}}{\qed\bigskip}
\newenvironment{proofIdea}{\noindent\textit{Proof Idea.}\hspace*{0.25em}}{\qed\bigskip}
\newenvironment{proofOfLemma}[1]{\noindent\textit{Proof of Lemma ##1.}\hspace*{0.25em}}{\qed\bigskip}
\newenvironment{proofAttempt}{\noindent\textit{Proof Attempt.}\hspace*{0.25em}}{\qed\bigskip}
\newenvironment{proofOf}[1]{\noindent\textit{Proof of ##1.}\hspace*{0.25em}}{\qed\bigskip}

% Custom QED symbol
\providecommand{\QEDsymbol}{\color{\accentcolor}\ensuremath{\blacksquare}}
\renewcommand{\qedsymbol}{\QEDsymbol}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Save and Restore Footnotes in Environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% These lines ensure that footnotes can be used within the specified environments (theorem, lemma, etc.)

\BeforeBeginEnvironment{theorem}{\savenotes} \AfterEndEnvironment{theorem}{\spewnotes}
\BeforeBeginEnvironment{lemma}{\savenotes} \AfterEndEnvironment{lemma}{\spewnotes}
\BeforeBeginEnvironment{corollary}{\savenotes} \AfterEndEnvironment{corollary}{\spewnotes}
\BeforeBeginEnvironment{proposition}{\savenotes} \AfterEndEnvironment{proposition}{\spewnotes}
\BeforeBeginEnvironment{definition}{\savenotes} \AfterEndEnvironment{definition}{\spewnotes}
\BeforeBeginEnvironment{remark}{\savenotes} \AfterEndEnvironment{remark}{\spewnotes}
\BeforeBeginEnvironment{claim}{\savenotes} \AfterEndEnvironment{claim}{\spewnotes}
\BeforeBeginEnvironment{fact}{\savenotes} \AfterEndEnvironment{fact}{\spewnotes}
\BeforeBeginEnvironment{assumption}{\savenotes} \AfterEndEnvironment{assumption}{\spewnotes}
\BeforeBeginEnvironment{conjecture}{\savenotes} \AfterEndEnvironment{conjecture}{\spewnotes}
\BeforeBeginEnvironment{problem}{\savenotes} \AfterEndEnvironment{problem}{\spewnotes}
\BeforeBeginEnvironment{solution}{\savenotes} \AfterEndEnvironment{solution}{\spewnotes}
\BeforeBeginEnvironment{case}{\savenotes} \AfterEndEnvironment{case}{\spewnotes}
\BeforeBeginEnvironment{example}{\savenotes} \AfterEndEnvironment{example}{\spewnotes}
\BeforeBeginEnvironment{problem}{\savenotes} \AfterEndEnvironment{problem}{\spewnotes}
\BeforeBeginEnvironment{property}{\savenotes} \AfterEndEnvironment{property}{\spewnotes}
\BeforeBeginEnvironment{solution}{\savenotes} \AfterEndEnvironment{solution}{\spewnotes}
\BeforeBeginEnvironment{important}{\savenotes} \AfterEndEnvironment{important}{\spewnotes}
\BeforeBeginEnvironment{keypoint}{\savenotes} \AfterEndEnvironment{keypoint}{\spewnotes}
\BeforeBeginEnvironment{highlight}{\savenotes} \AfterEndEnvironment{highlight}{\spewnotes}

% Disable the use of '@' in command names
\makeatother

% End of package
\endinput